<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Detective Stories: Murder Mysteries</title>
      <link rel="icon" type="image/png" href="https://github.com/TitanBusinessPros/Detective/raw/main/Detective-Favicon.png">
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Georgia', serif;
        }

        body {
            background-color: #202020;
            color: #e6e6e6;
            min-height: 100vh;
            overflow: auto;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }

        #game-container {
            width: 100%;
            max-width: 1000px;
            height: 95vh;
            max-height: 800px;
            display: flex;
            flex-direction: column;
            position: relative;
            border: 2px solid #3f3f3f;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        /* Main Menu Styles */
        #main-menu {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }

        .menu-title {
            font-size: clamp(2rem, 5vw, 3.5rem);
            margin-bottom: 1.5rem;
            text-shadow: 0 0 10px rgba(0, 150, 255, 0.7);
            color: #ffffff;
        }

        .menu-subtitle {
            font-size: clamp(1rem, 3vw, 1.5rem);
            margin-bottom: 2rem;
            color: #cccccc;
            max-width: 600px;
            line-height: 1.6;
        }

        .case-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            width: min(300px, 90%);
        }

        .case-btn {
            padding: 12px 20px;
            font-size: 1rem;
            background: #4f4f4f;
            color: #e6e6e6;
            border: 2px solid #4f4f4f;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .case-btn:hover {
            background: #7e7e7e;
            border-color: #9e9e9e;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Game Screen Styles */
        #game-screen {
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
        }

        #game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: #202020;
            border-bottom: 2px solid #101010;
            flex-wrap: wrap;
            gap: 10px;
        }

        #game-logo {
            width: 150px;
            height: 30px;
            background-image: url('https://github.com/TitanBusinessPros/Detective/raw/main/Detective-Favicon.png');
            background-size: contain;
            background-repeat: no-repeat;
        }

        #game-controls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 6px 12px;
            font-size: 0.9rem;
            background: #2f2f2f;
            color: #D71515;
            border: 1px solid #202020;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .control-btn:hover {
            background: #202020;
        }

        #game-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            flex-direction: column;
        }

        #game-main {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        #background {
            flex: 1;
            transition: background-image 0.5s ease;
            min-height: 150px;
            max-height: 500px;
        }

        #dialogue-container {
            background: Black
            padding: 15px;
            border-top: 2px solid #202020;
            min-height: 40%;
            overflow-y: auto;
        }

        #speaker-name {
            font-size: 1.3rem;
            margin-bottom: 8px;
            color: #DC143C;
        }

        #dialogue-text {
            font-size: 1rem;
            line-height: 1.5;
            margin-bottom: 15px;
            min-height: 60px;
        }

        #choices-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .choice-btn {
            padding: 10px 15px;
            background: #2f2f2f;
            color: white;
            border: 1px solid #101010;
            border-radius: 5px;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s ease;
            font-size: 0.95rem;
            font: white
        }

        .choice-btn:hover {
            background: #202020;
            border-color: #4a0c1c;
            
        }

        /* Notepad Styles */
        #notepad-container {
            flex: 1;
            display: none;
            flex-direction: column;
            background: #202020;
            border-left: 2px solid black;
            max-width: 100%;
        }

        #notepad-header {
            padding: 8px;
            background: black;
            border-bottom: 1px solid #DC143C;
            text-align: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        #notepad {
            flex: 1;
            padding: 12px;
            background: #FFFF99;
            border: none;
            color: white;
            font-size: 0.9rem;
            line-height: 1.5;
            resize: none;
            outline: none;
        }

        #notepad::placeholder {
            color: black;
        }

        /* Ending Screen Styles */
        #ending-screen {
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8));
        }

        .ending-title {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            margin-bottom: 1.5rem;
            color: #DC143C;
        }

        .ending-text {
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            line-height: 1.6;
            max-width: 800px;
            margin-bottom: 1.5rem;
        }

        .ending-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .ending-btn {
            padding: 10px 20px;
            font-size: 1rem;
            background: #2d2d44;
            color: #e6e6e6;
            border: 2px solid #4f4f4f;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ending-btn:hover {
            background: #3a3a5a;
            border-color: #5a5a8a;
        }
        /* UNIVERSAL background */
        .bg-captain-office {
            background: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Captain_Office.jpeg');
            background-size: 85%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-detective-backdrop {
            background: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/SkinndetectiveBackground.jpeg');
            background-size: 50%;
            background-position: center;
        }
       
        .bg-police-station {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Police_Station.png');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-detective-desk {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Detective%20Desk.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-tech-specialist-office {
        background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Tech-Specialist-Office.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-interview-room-1{
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Universal-Interview-Room-1.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-interview-room-2{
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Universal-Interview-Room-2.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        
        /* CASE 1 */
        .bg-penthouse-intro {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%201%20Intro.jpeg');
            background-size: 65%;
            background-position: center;
        }
        .bg-penthouse {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%201%20CEO%20Penthouse.jpeg');
            background-size: 65%;
            background-position: center;
        }
        .bg-penthouse-balcony {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), 
                url('https://raw.githubusercontent.com/TitanBusinessPros/Detective/main/bg-penthouse-balcony.png');
            background-size: 65%;
            background-position: center;
        }
              
        .bg-victor-office {
            background: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case-1-victor-office.jpeg');
            background-size: 65%;
            background-position: center;
        }
        .bg-mara-appartment {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case-1-mara-apartment.jpeg');
            background-size: 75%;
            background-position: center;
        }
        /* CASE 2 */
        .bg-boardwalk {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%202%20Boardwalk.jpeg');
            background-size: 90%;
            background-position: center;
            background-repeat: no-repeat;
        }
         .bg-docks {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%202%20Docks.jpeg');
            background-size: 85%;
            background-position: center;
            background-repeat: no-repeat;
        }
         .bg-upper-boardwalk {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%202%202nd%20story%20boardwalk.jpeg');
            background-size: 85%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-boardwalk-intro {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%202%20intro.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-office {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/case%202%20office.jpeg');
            background-size: 85%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-croft-imports {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%202%20Crofr%20Imports.png');
            background-size: 65%;
            background-position: center;
        }
        .bg-sterling-souvenirs {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%202%20Sterling%20Souvenirs.jpeg');
            background-size: 85%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-jacks-apartment {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%202%20jack-apartment.jpeg');
            background-size: 85%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-salty-dog {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%202%20Salty%20Dog.png');
            background-size: 85%;
            background-position: center;
            background-repeat: no-repeat;
        }
        /* CASE 3 */
        .bg-theater {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url(https://github.com/TitanBusinessPros/Detective/raw/main/Case%203%20Theater.png);
            background-size: 80%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-backstage {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%203%20Backstage.png');
            background-size: 80%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-green-room {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%203%20Green%20Room.jpeg');
            background-size: 80%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-prop-table {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%203%20Prop%20Table.png');
            background-size: 80%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-sophia-dressing-room {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%203%20Sophias%20Dressing%20Room.jpeg');
            background-size: 80%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-victoria-dressing-room {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%203%20Victorias%20Dressing%20Room.jpeg');
            background-size: 80%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-marcos-dressing-room {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case3%20Marcos%20Dressing%20Room.jpeg');
            background-size: 80%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-theater-intro {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%203%20Intro.jpeg');
            background-size: 80%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-directors-office {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%203%20Directors%20Office.png');
            background-size: 80%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-office {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('');
            background-size: 80%;
            background-position: center;
            background-repeat: no-repeat;
        }
        /* CASE 4 */
        .bg-office-cubicles {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%204%20office-cubicles.png');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-server-room {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%204%20server-room.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-boardroom {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%204%20boardroom.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-novatech-hallway {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%204%20novatech-hallway.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-novatech-lobby {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%204%20novatech-lobby.png');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-administrative-office {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%204%20administrative-office.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-Julians-Office {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%204%20Julians%20Office.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-coup-intro {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%204%20Intro.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-hotel-lobby {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%204%20Hotel%20Lobby.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-elias-office {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/CAse%204%20Elias%20Office.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
      /* 6. Case 5 */
        .bg-cruise-deck {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%205%20Cruise%20Deck.jpeg');
            background-size: 85%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-cruise-cabin {
            background: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%205%20cruise-cabin.jpeg');
            background-size: 85%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-casino-bar {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%205%20casino-bar.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-cruise-casino {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%205%20cruise-casino.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-cruise-gym {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%205%20cruise-gym.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-cruise-maintenance {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%205%20cruise-maintenance.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-cruise-observation-deck {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%205%20bg-cruise-observation-deck.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .bg-arthur-cabin {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                url('https://github.com/TitanBusinessPros/Detective/raw/main/Case%205%20arthur-cabin.jpeg');
            background-size: 65%;
            background-position: center;
            background-repeat: no-repeat;
        }
        /* Music Controls */
        #music-controls {
            position: absolute;
            bottom: 10px;
            right: 10px;
            display: flex;
            gap: 8px;
            z-index: 10;
            background: #202020;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #4f4f4f;
            flex-direction: column;
            align-items: center;
            min-width: 150px;
        }
        
        .music-btn {
            padding: 6px 12px;
            font-size: 0.8rem;
            background: #4f4f4f;
            color: #e6e6e6;
            border: 1px solid #4f4f4f;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
        }
        
        .music-btn:hover {
            background: #ffffff;
        }
        
        .volume-control {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
        }
        
        .volume-slider {
            flex: 1;
            -webkit-appearance: none;
            height: 5px;
            background: #6f6f6f;
            border-radius: 5px;
            outline: none;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 15px;
            height: 15px;
            background: #8e8e8e;
            border-radius: 50%;
            cursor: pointer;
            accent-color: #8e8e8e;
        }
        
        .volume-slider::-moz-range-thumb {
            width: 15px;
            height: 15px;
            background: #101010;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        /* Media Queries for Mobile Optimization */
        @media (min-width: 768px) {
            #game-content {
                flex-direction: row;
            }
            
            #notepad-container {
                max-width: 300px;
            }
        }

        @media (max-width: 480px) {
            #game-header {
                padding: 8px 10px;
            }
            
            #game-logo {
                width: 120px;
                height: 25px;
            }
            
            .control-btn {
                padding: 5px 8px;
                font-size: 0.8rem;
            }
            
            #dialogue-container {
                padding: 10px;
            }
            
            .choice-btn {
                padding: 8px 12px;
                font-size: 0.9rem;
            }
            
            #music-controls {
                bottom: 5px;
                right: 5px;
                min-width: 130px;
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <!-- Main Menu Screen -->
        <div id="main-menu" class="scene-container bg-detective-backdrop">
            <h1 class="menu-title">DETECTIVE STORIES</h1>
            <p class="menu-subtitle">Solve the unsolvable. Find the truth. Five challenging murder mysteries await your investigation.</p>
            <div class="case-buttons">
                <button class="case-btn" data-case="1">Case 1: The CEO's Penthouse</button>
                <button class="case-btn" data-case="2">Case 2: The Boardwalk Incident</button>
                <button class="case-btn" data-case="3">Case 3: The Theater Poisoning</button>
                <button class="case-btn" data-case="4">Case 4: The Corporate Coup</button>
                <button class="case-btn" data-case="5">Case 5: The Deception at Sea</button>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen">
            <div id="game-header">
                <div id="game-logo"></div>
                <div id="game-controls">
                    <button class="control-btn" id="toggle-notepad">Toggle Notepad</button>
                    <button class="control-btn" id="restart-case-btn">Restart Case</button>
                    <button class="control-btn" id="main-menu-btn">Main Menu</button>
                </div>
            </div>
            <div id="game-content">
                <div id="game-main">
                    <div id="background" class="bg-police-station"></div>
                    <div id="dialogue-container">
                        <div id="speaker-name">Detective</div>
                        <div id="dialogue-text">Welcome to the case. Let's begin our investigation.</div>
                        <div id="choices-container">
                            <!-- Choice buttons will be dynamically inserted here -->
                        </div>
                    </div>
                </div>
                <div id="notepad-container" style="display: none;">
                    <div id="notepad-header">Detective's Notepad</div>
                    <textarea id="notepad" placeholder="Take notes about the case here..."></textarea>
                </div>
            </div>
        </div>

        <!-- Ending Screen -->
        <div id="ending-screen">
            <h2 class="ending-title">Case Resolved</h2>
            <div class="ending-text" id="ending-text">
                The case has been solved. Justice has been served.
            </div>
            <div class="ending-buttons">
                <button class="ending-btn" id="restart-case">Play Case Again</button>
                <button class="ending-btn" id="return-menu">Return to Menu</button>
            </div>
        </div>
        
        <!-- Music Controls -->
        <div id="music-controls">
            <div class="volume-control">
                <span>ðŸ”Š</span>
                <input type="range" min="0" max="100" value="50" class="volume-slider" id="volume-slider">
            </div>
        </div>
    </div>
    
    <!-- Background Music -->
    <audio id="background-music" loop>
        <source src="https://github.com/TitanBusinessPros/Detective/raw/main/Detective%20Theme%20Song.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <script>
        // Game State
        const gameState = {
            currentCase: null,
            clues: {},
            suspectTrust: {
                mara: 0,
                alex: 0,
                victor: 0,
                elena: 0,
                benjamin: 0,
                isabella: 0,
                jack: 0,
                olivia: 0,
                marco: 0,
                victoria: 0,
                arthur: 0
            },
            flags: {},
            notes: ""
        };

        // Background Music
        const backgroundMusic = document.getElementById('background-music');
        let musicStarted = false;
        let musicPlaying = true;
        
        // Function to start music on user interaction
        function startMusicOnInteraction() {
            if (!musicStarted) {
                backgroundMusic.volume = 0.5;
                backgroundMusic.play().then(() => {
                    musicStarted = true;
                    console.log("Background music started");
                }).catch(error => {
                    console.log("Music play failed, waiting for user interaction:", error);
                });
            }
        }
        
        // Set up event listeners for user interaction
        document.addEventListener('click', startMusicOnInteraction);
        document.addEventListener('keydown', startMusicOnInteraction);

        // Volume control
        const volumeSlider = document.getElementById('volume-slider');
        volumeSlider.addEventListener('input', function() {
            backgroundMusic.volume = this.value / 100;
        });
        
        // Sound Effects
        const sounds = {
            click: new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA=='),
            sting: new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA=='),
            door: new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA=='),
            crowd: new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==')
        };

        // Scene System
        const scenes = {};
        
// --- Case 1 Scene Definitions ---

scenes["case1_intro"] = {
    background: "bg-penthouse-intro",
    speaker: "Dispatch",
    text: "Detective, we have a situation at the Aethelred Tech headquarters. CEO Marcus Aethelred has been found dead in his locked penthouse. The preliminary report suggests foul play. You're the lead on this case.",
    choices: [
        { label: "Head to the penthouse immediately", nextScene: "case1_penthouse_arrival" },
        { label: "First review the case files", nextScene: "case1_review_files" }
    ],
    sfx: "sting"
};

scenes["case1_review_files"] = {
    background: "bg-detective-desk",
    speaker: "Detective",
    text: "Looking at the files: Marcus Aethelred, 52, tech billionaire. No known enemies but had several business rivals. Lives alone in a high-security penthouse. Body discovered by his assistant Mara at 8:00 AM.",
    choices: [
        { label: "Head to the penthouse now", nextScene: "case1_penthouse_arrival" }
    ]
};

scenes["case1_penthouse_arrival"] = {
    background: "bg-penthouse",
    speaker: "Officer Miller",
    text: "Detective, glad you're here. The victim is Marcus Aethelred, founder of Aethelred Tech. The body was discovered by his assistant, Mara, this morning. The penthouse was locked from inside when she arrived.",
    choices: [
        { label: "Examine the body", nextScene: "case1_examine_body" },
        { label: "Question Mara", nextScene: "case1_question_mara" },
        { label: "Look for entry points", nextScene: "case1_look_entry" }
    ]
};

scenes["case1_examine_body"] = {
    background: "bg-penthouse",
    speaker: "Forensic Expert",
    text: "The victim has a single stab wound to the chest. The weapon appears to be missing. No signs of struggle. Time of death estimated between 10 PM and midnight last night.",
    choices: [
        { label: "Look for the murder weapon", nextScene: "case1_find_weapon" },
        { label: "Check the victim's personal effects", nextScene: "case1_personal_effects" },
        { label: "Return to the main room", nextScene: "case1_penthouse_arrival" }
    ],
    effect: function() { addClue("bodyExamined"); }
};

scenes["case1_question_mara"] = {
    background: "bg-penthouse",
    speaker: "Mara",
    text: "I found him like this when I arrived this morning. I have a key to the penthouse, but it was double-locked from inside. I don't understand how this could happen. Mr. Aethelred was a private man, but he had been stressed lately.",
    choices: [
        { label: "Ask about his recent stress", nextScene: "case1_mara_stress" },
        { label: "Ask about his relationships", nextScene: "case1_mara_relationships" }, // Defined below
        { label: "Return to investigation", nextScene: "case1_penthouse_arrival" }
    ]
};

// *** NEW SCENE DEFINITION (Was Missing) ***
scenes["case1_mara_relationships"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "Marcus kept his personal life very guarded. There was his ex-wife, **Elena**, who was always demanding more money. And his business partner, **Alex**, who he saw almost as much as a family memberâ€”though their relationship was strained lately due to the merger.",
    choices: [
        { label: "Ask about Alex's stress", nextScene: "case1_mara_alex" },
        { label: "Ask about Elena", nextScene: "case1_mara_elena" },
        { label: "Return to other questions", nextScene: "case1_question_mara" }
    ]
};
// *****************************************

scenes["case1_mara_stress"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "He was working on a major merger with Apex Industries. There was some tension with his business partner, Alex, who felt the terms weren't favorable. And his ex-wife Elena had been calling more frequently.",
    choices: [
        { label: "Ask about Alex", nextScene: "case1_mara_alex" },
        { label: "Ask about Elena", nextScene: "case1_mara_elena" }, // Defined below
        { label: "Return to other questions", nextScene: "case1_question_mara" }
    ]
};

// *** NEW SCENE DEFINITION (Was Missing) ***
scenes["case1_mara_elena"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "Elena, his ex-wife, was constantly calling and sending emails. They had a contentious divorce, and she was always threatening to expose him for *something* if he didn't give her more money. It was exhausting for him.",
    choices: [
        { label: "What was she threatening to expose?", nextScene: "case1_elena_blackmail_hint" },
        { label: "Ask about Alex", nextScene: "case1_mara_alex" },
        { label: "Return to other questions", nextScene: "case1_question_mara" }
    ],
    effect: function() { addClue("elenaFinancialTrouble"); }
};

// *** NEW SCENE DEFINITION (Plot path refinement) ***
scenes["case1_elena_blackmail_hint"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "She never said the specifics to me, but I heard him shouting about company accounts and 'creative bookkeeping.' He was desperate to stop her.",
    choices: [
        { label: "Ask about other visitors", nextScene: "case1_mara_visitors" }, // Defined below
        { label: "Return to other questions", nextScene: "case1_question_mara" }
    ]
};
// *****************************************

scenes["case1_mara_alex"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "Alex was there yesterday afternoon. They had a heated argument about the merger. Alex was angry that Marcus was considering other offers. I heard Alex say 'This isn't over, Marcus.' before he stormed out.",
    choices: [
        { label: "That sounds threatening", nextScene: "case1_mara_alex_threat" },
        { label: "Ask about other visitors", nextScene: "case1_mara_visitors" } // Defined below
    ]
};

scenes["case1_mara_alex_threat"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "It did sound threatening, but Alex says things like that sometimes. He has a temper but he's never been violent. Still, with everything that's happened...",
    choices: [
        { label: "Make a note to question Alex", nextScene: "case1_after_mara" },
        { label: "Ask about security systems", nextScene: "case1_mara_security" }
    ],
    effect: function() {Â 
        addClue("alexArgument");Â 
        modifyTrust("alex", -1);
    }
};

// *** NEW SCENE DEFINITION (Was Missing) ***
scenes["case1_mara_visitors"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "Only Alex was there yesterday afternoon. Marcus was very strict about visitors. No one else came up, and he didn't leave after Alex did. I was the last person to see him alive, not counting the killer.",
    choices: [
        { label: "Ask about security systems", nextScene: "case1_mara_security" },
        { label: "Return to other questions", nextScene: "case1_question_mara" }
    ]
};
// *****************************************

scenes["case1_after_mara"] = {
    background: "bg-penthouse",
    speaker: "Detective",
    text: "I should continue investigating the crime scene.",
    choices: [
        { label: "Examine the body", nextScene: "case1_examine_body" },
        { label: "Look for entry points", nextScene: "case1_look_entry" },
        { label: "Check security systems", nextScene: "case1_check_security" }
    ]
};

scenes["case1_mara_security"] = {
    background: "bg-penthouse",
    speaker: "Mara",
    text: "The penthouse has a state-of-the-art security system with cameras in the hallway and lobby. All access is logged. There's also a safe room that only Marcus knew how to access.",
    choices: [
        { label: "Check the security logs", nextScene: "case1_check_security" },
        { label: "Return to other questions", nextScene: "case1_question_mara" }
    ]
};

scenes["case1_check_security"] = {
    background: "bg-penthouse",
    speaker: "Security Technician",
    text: "The logs show Mara entered at 8:02 AM today. Before that, Marcus Aethelred entered at 6:15 PM yesterday. There's a gap in the hallway camera footage from 10:30 PM to 11:00 PM last night - system maintenance.",
    choices: [
        { label: "That's suspicious timing", nextScene: "case1_security_gap" },
        { label: "Return to investigation", nextScene: "case1_penthouse_arrival" }
    ],
    effect: function() { addClue("securityGap"); }
};

scenes["case1_security_gap"] = {
    background: "bg-penthouse",
    speaker: "Security Technician",
    text: "The maintenance was scheduled, but the timing is coincidental with the estimated time of death. Someone could have exploited this window.",
    choices: [
        { label: "Look for other evidence", nextScene: "case1_penthouse_arrival" }
    ]
};

scenes["case1_look_entry"] = {
    background: "bg-penthouse",
    speaker: "Detective",
    text: "The penthouse is on the 50th floor. All windows are sealed and intact. The only entrance is through the main door, which was double-locked from inside. There's a ventilation system, but the shafts are too small for a person.",
    choices: [
        { label: "Check for hidden passages", nextScene: "case1_hidden_passages" },
        { label: "Examine the safe room", nextScene: "case1_safe_room" },
        { label: "Return to main investigation", nextScene: "case1_penthouse_arrival" }
    ]
};

scenes["case1_hidden_passages"] = {
    background: "bg-penthouse",
    speaker: "Officer Miller",
    text: "No hidden passages found. The building blueprints show this is a standard luxury penthouse layout. The previous owner was a paranoid art collector, but no modifications were made to the structure.",
    choices: [
        { label: "Continue searching", nextScene: "case1_look_entry" }
    ]
};

scenes["case1_safe_room"] = {
    background: "bg-penthouse",
    speaker: "Detective",
    text: "The safe room is behind a bookshelf. It's sealed with a biometric lock. According to Mara, only Marcus knew how to open it. The forensic team will need to examine it.",
    choices: [
        { label: "Try to find another way in", nextScene: "case1_safe_room_attempt" },
        { label: "Return to main investigation", nextScene: "case1_penthouse_arrival" }
    ]
};

scenes["case1_safe_room_attempt"] = {
    background: "bg-penthouse",
    speaker: "Forensic Expert",
    text: "We found something! There are faint scratch marks around the lock mechanism. Someone tried to force this open recently.",
    choices: [
        { label: "Document this evidence", nextScene: "case1_safe_room_evidence" }
    ]
};

scenes["case1_safe_room_evidence"] = {
    background: "bg-penthouse",
    speaker: "Detective",
    text: "This suggests someone tried to access the safe room. The killer might have been looking for something valuable. But how did they get into the penthouse in the first place?",
    choices: [
        { label: "Return to main investigation", nextScene: "case1_penthouse_arrival" }
    ],
    effect: function() { addClue("safeRoomTampered"); }
};

scenes["case1_find_weapon"] = {
    background: "bg-penthouse",
    speaker: "Forensic Expert",
    text: "No sign of the murder weapon in the penthouse. The wound suggests a thin, sharp blade about 6 inches long. Could be a hunting knife or similar weapon.",
    choices: [
        { label: "Check if anything is missing from the kitchen", nextScene: "case1_kitchen_check" },
        { label: "Look for blood traces", nextScene: "case1_blood_traces" },
        { label: "Return to body examination", nextScene: "case1_examine_body" }
    ]
};

scenes["case1_kitchen_check"] = {
    background: "bg-penthouse",
    speaker: "Officer Miller",
    text: "The kitchen knife set is complete. No missing knives. The victim didn't cook much anyway - mostly ordered in or had meals prepared.",
    choices: [
        { label: "So the killer brought their own weapon", nextScene: "case1_weapon_brought" }
    ]
};

scenes["case1_weapon_brought"] = {
    background: "bg-penthouse",
    speaker: "Detective",
    text: "The killer came prepared with a weapon. This was premeditated, not a crime of passion. They knew they were going to kill Marcus.",
    choices: [
        { label: "Continue investigation", nextScene: "case1_find_weapon" }
    ],
    effect: function() { addClue("premeditated"); }
};

scenes["case1_blood_traces"] = {
    background: "bg-penthouse-balcony",
    speaker: "Forensic Expert",
    text: "Luminol reveals faint blood traces leading toward the balcony. Someone cleaned up, but not thoroughly enough.",
    choices: [
        { label: "Follow the blood trail", nextScene: "case1_blood_trail" }
    ]
};

scenes["case1_blood_trail"] = {
    background: "bg-penthouse-balcony",
    speaker: "Detective",
    text: "The blood traces lead to the balcony. There are minute scratch marks on the railing. It looks like someone might have climbed up or down from here.",
    choices: [
        { label: "That's 50 floors up!", nextScene: "case1_balcony_reveal" }
    ]
};

scenes["case1_balcony_reveal"] = {
    background: "bg-penthouse-balcony",
    speaker: "Officer Miller",
    text: "Impossible! No one could climb 50 stories. But wait... maintenance records show window washers were working on this side of the building yesterday. They use suspended platforms.",
    choices: [
        { label: "Check the window washer schedule", nextScene: "case1_window_washers" },
        { label: "Look for other evidence on balcony", nextScene: "case1_balcony_evidence" }
    ]
};

scenes["case1_window_washers"] = {
    background: "bg-penthouse",
    speaker: "Detective",
    text: "The window washing was scheduled for 2-4 PM yesterday. But the security gap was at 10:30 PM. Different timing.",
    choices: [
        { label: "Interview the window washers anyway", nextScene: "case1_interview_washers" },
        { label: "Return to balcony evidence", nextScene: "case1_balcony_evidence" }
    ]
};

scenes["case1_interview_washers"] = {
    background: "bg-police-station",
    speaker: "Window Washer",
    text: "Yeah, we were there yesterday afternoon. Everything was normal. We did notice one of the balcony doors was slightly open, but that happens sometimes. Rich folks forget to close things.",
    choices: [
        { label: "Was the door unlocked?", nextScene: "case1_washer_door" }
    ]
};

scenes["case1_washer_door"] = {
    background: "bg-police-station",
    speaker: "Window Washer",
    text: "Couldn't tell if it was unlocked, but it was definitely ajar. About two inches open. We didn't think much of it at the time.",
    choices: [
        { label: "This could be how the killer entered", nextScene: "case1_after_washers" }
    ],
    effect: function() { addClue("balconyDoorAjar"); }
};

scenes["case1_after_washers"] = {
    background: "bg-police-station",
    speaker: "Detective",
    text: "So the killer could have accessed the balcony through the window washer platform, then entered through the slightly open door. But they would need to know the door would be open.",
    choices: [
        { label: "Continue investigation", nextScene: "case1_penthouse_arrival" }
    ]
};

scenes["case1_balcony_evidence"] = {
    background: "bg-penthouse-balcony",
    speaker: "Forensic Expert",
    text: "We found a single strand of synthetic fiber caught on the balcony railing. Dark blue color. It doesn't match anything in the penthouse.",
    choices: [
        { label: "Bag it as evidence", nextScene: "case1_fiber_evidence" }
    ]
};

scenes["case1_fiber_evidence"] = {
    background: "bg-penthouse-balcony",
    speaker: "Detective",
    text: "This could be from the killer's clothing. Dark blue synthetic fiber - possibly from work clothes or outdoor gear.",
    choices: [
        { label: "Continue investigation", nextScene: "case1_penthouse_arrival" }
    ],
    effect: function() { addClue("fiberEvidence"); }
};

scenes["case1_personal_effects"] = {
    background: "bg-tech-specialist-office",
    speaker: "Detective",
    text: "The victim's personal effects: wallet with cash and cards intact, expensive watch, phone. In his pocket, a folded note with the numbers '7-4-2-9' written on it.",
    choices: [
        { label: "What could this number mean?", nextScene: "case1_numbers_mean" },
        { label: "Check his phone", nextScene: "case1_check_phone" },
        { label: "Return to body examination", nextScene: "case1_examine_body" }
    ]
};
scenes["case1_check_phone"] = {
    background: "bg-penthouse",
    speaker: "Detective",
    text: "The phone is locked with a fingerprint ID. We'll need a warrant and time to access it. For now, let's focus on the computer.",
    choices: [
        { label: "Check his computer instead", nextScene: "case1_check_computer" },
        { label: "Return to personal effects", nextScene: "case1_personal_effects" }
    ]
};
scenes["case1_numbers_mean"] = {
    background: "bg-penthouse",
    speaker: "Detective",
    text: "7-4-2-9. Could be a code, combination, or password. Might be related to the safe room or his computer.",
    choices: [
        { label: "Try it on the safe room", nextScene: "case1_try_safe_code" },
        { label: "Check his computer", nextScene: "case1_check_computer" }
    ],
    effect: function() { addClue("mysteriousNumbers"); }
};

scenes["case1_try_safe_code"] = {
    background: "bg-penthouse",
    speaker: "Officer Miller",
    text: "The safe room has a biometric lock, not a keypad. The numbers don't work here.",
    choices: [
        { label: "Check his computer instead", nextScene: "case1_check_computer" }
    ]
};

scenes["case1_check_computer"] = {
    background: "bg-tech-specialist-office",
    speaker: "Tech Specialist",
    text: "The computer is password protected. The numbers 7-4-2-9 don't work as the password. There is an encrypted file on the desktop labeled 'Merger Concerns'.",
    choices: [
        { label: "Try to bypass the security", nextScene: "case1_bypass_computer" },
        { label: "Look for other clues", nextScene: "case1_personal_effects" }
    ]
};

scenes["case1_bypass_computer"] = {
    background: "bg-tech-specialist-office",
    speaker: "Tech Specialist",
    text: "I've bypassed the security. The 'Merger Concerns' file contains emails showing Marcus was considering backing out of the Apex Industries merger. Alex would be furious - he'd lose millions.",
    choices: [
        { label: "Strong motive for Alex", nextScene: "case1_alex_motive" },
        { label: "Look for other files", nextScene: "case1_other_files" }
    ],
    effect: function() {Â 
        addClue("mergerConcerns");Â 
        modifyTrust("alex", -2);
    }
};

scenes["case1_alex_motive"] = {
    background: "bg-tech-specialist-office",
    speaker: "Detective",
    text: "Alex had a strong financial motive. If Marcus backed out of the merger, Alex stood to lose everything. With Marcus dead, the merger would proceed under Alex's leadership.",
    choices: [
        { label: "Bring Alex in for questioning", nextScene: "case1_question_alex" },
        { label: "Look for more evidence first", nextScene: "case1_other_files" }
    ]
};

scenes["case1_other_files"] = {
    background: "bg-tech-specialist-office",
    speaker: "Tech Specialist",
    text: "There's another interesting file - personal correspondence with his ex-wife Elena. She was demanding more money from their divorce settlement, threatening to reveal damaging information about his business practices.",
    choices: [
        { label: "What kind of information?", nextScene: "case1_elena_blackmail" }
    ]
};

scenes["case1_elena_blackmail"] = {
    background: "bg-tech-specialist-office",
    speaker: "Detective",
    text: "Elena was threatening to reveal that Marcus had been using company funds for personal expenses - a serious legal violation. She wanted $5 million to keep quiet.",
    choices: [
        { label: "Motive for Elena too", nextScene: "case1_elena_motive" },
        { label: "Continue computer search", nextScene: "case1_computer_continue" }
    ],
    effect: function() {Â 
        addClue("elenaBlackmail");Â 
        modifyTrust("elena", -1);
    }
};

scenes["case1_elena_motive"] = {
    background: "bg-tech-specialist-office",
    speaker: "Detective",
    text: "Elena needed money and Marcus was refusing to pay. With him dead, she might inherit through their divorce agreement or life insurance.",
    choices: [
        { label: "Bring Elena in for questioning", nextScene: "case1_question_elena" },
        { label: "Continue computer search", nextScene: "case1_computer_continue" }
    ]
};

scenes["case1_computer_continue"] = {
    background: "bg-tech-specialist-office",
    speaker: "Tech Specialist",
    text: "One more thing - security camera footage from the building across the street. It shows a figure on the balcony around 10:45 PM last night. The quality is poor, but the person appears to be wearing dark blue clothing.",
    choices: [
        { label: "That matches our fiber evidence!", nextScene: "case1_camera_match" }
    ],
    effect: function() { addClue("securityFootage"); }
};

scenes["case1_camera_match"] = {
    background: "bg-tech-specialist-office",
    speaker: "Detective",
    text: "The dark blue clothing matches the fiber we found. The timeline matches the security gap and estimated time of death. We're getting closer.",
    choices: [
        { label: "Continue investigation", nextScene: "case1_penthouse_arrival" }
    ]
};

scenes["case1_question_alex"] = {
    background: "bg-interview-room-1",
    speaker: "Alex",
    text: "This is ridiculous! Yes, we argued about the merger, but I would never hurt Marcus. We built this company together!",
    choices: [
        { label: "Where were you last night?", nextScene: "case1_alex_alibi" },
        { label: "We know about the merger concerns", nextScene: "case1_alex_merger" },
        { label: "Do you own dark blue work clothes?", nextScene: "case1_alex_clothing" }
    ]
};

scenes["case1_alex_alibi"] = {
    background: "bg-interview-room-1",
    speaker: "Alex",
    text: "I was at the Grand Hotel from 8 PM until morning. Business dinner with investors, then stayed the night. You can check with the hotel.",
    choices: [
        { label: "We will verify that", nextScene: "case1_alex_continue" }
    ]
};

scenes["case1_alex_merger"] = {
    background: "bg-interview-room-1",
    speaker: "Alex",
    text: "So you know Marcus was having second thoughts. Yes, I was angry. But killing him doesn't help me - the merger would likely fall through without him.",
    choices: [
        { label: "Not if you take control", nextScene: "case1_alex_control" }
    ]
};

scenes["case1_alex_control"] = {
    background: "bg-interview-room-1",
    speaker: "Alex",
    text: "The board would never let me lead alone. They loved Marcus. This actually hurts my position, not helps it.",
    choices: [
        { label: "Ask about clothing", nextScene: "case1_alex_clothing" }
    ]
};

scenes["case1_alex_clothing"] = {
    background: "bg-interview-room-1",
    speaker: "Alex",
    text: "Dark blue work clothes? I wear suits, Detective. Expensive ones. I don't own any 'work clothes' as you call them.",
    choices: [
        { label: "Continue questioning", nextScene: "case1_alex_continue" }
    ]
};

scenes["case1_alex_continue"] = {
    background: "bg-interview-room-1",
    speaker: "Alex",
    text: "Look, I'm sorry Marcus is dead. We had our differences, but he was my friend. I want you to find who did this.",
    choices: [
        { label: "Return to investigation", nextScene: "case1_after_interviews" }
    ]
};

scenes["case1_question_elena"] = {
    background: "bg-interview-room-2",
    speaker: "Elena",
    text: "About time you called me in. I assume you found my emails. Yes, I wanted more money. The settlement was unfair and Marcus knew it.",
    choices: [
        { label: "Where were you last night?", nextScene: "case1_elena_alibi" },
        { label: "Threatening someone is illegal", nextScene: "case1_elena_threats" },
        { label: "Do you benefit from his death?", nextScene: "case1_elena_benefit" }
    ]
};

scenes["case1_elena_alibi"] = {
    background: "bg-interview-room-2",
    speaker: "Elena",
    text: "I was at the charity gala at the Metropolitan Museum until 11 PM, then home with my sister. Dozens of people saw me.",
    choices: [
        { label: "We will check that", nextScene: "case1_elena_continue" }
    ]
};

scenes["case1_elena_threats"] = {
    background: "bg-interview-room-2",
    speaker: "Elena",
    text: "I wasn't threatening him, I was stating facts. He was misusing company funds. I have proof. I was going to the board, not the police.",
    choices: [
        { label: "That would have destroyed him", nextScene: "case1_elena_destroy" }
    ]
};

scenes["case1_elena_destroy"] = {
    background: "bg-interview-room-2",
    speaker: "Elena",
    text: "Exactly. So why would I kill him? With him dead, my leverage is gone. The company lawyers will tie everything up for years.",
    choices: [
        { label: "Ask about benefit", nextScene: "case1_elena_benefit" }
    ]
};

scenes["case1_elena_benefit"] = {
    background: "bg-interview-room-2",
    speaker: "Elena",
    text: "I get nothing from his death! Our divorce agreement specifically excluded me from his estate. I get exactly zero dollars if he dies. Check the paperwork!",
    choices: [
        { label: "We will", nextScene: "case1_elena_continue" }
    ]
};

scenes["case1_elena_continue"] = {
    background: "bg-interview-room-2",
    speaker: "Elena",
    text: "I'm sorry Marcus is dead, truly. We had our problems, but I didn't want this. Find who did this, Detective.",
    choices: [
        { label: "Return to investigation", nextScene: "case1_after_interviews" }
    ]
};

scenes["case1_after_interviews"] = {
    background: "bg-detective-desk",
    speaker: "Detective",
    text: "Both Alex and Elena have motives, but also reasonable alibis. Alex doesn't seem like the type to climb balconies, and Elena has no financial benefit from the death. I need to keep looking.",
    choices: [
        { label: "Check the window washer alibis", nextScene: "case1_washer_alibis" },
        { label: "Re-examine the evidence", nextScene: "case1_reexamine_evidence" },
        { label: "Make an accusation", nextScene: "case1_accusation" }
    ]
};

scenes["case1_washer_alibis"] = {
    background: "bg-detective-desk",
    speaker: "Officer Miller",
    text: "The window washers all have solid alibis for last night. Most were together at a bowling tournament. They're cleared.",
    choices: [
        { label: "Back to investigation", nextScene: "case1_after_interviews" }
    ]
};

scenes["case1_reexamine_evidence"] = {
    background: "bg-detective-desk",
    speaker: "Detective",
    text: "Let me look at what we have: the fiber evidence, security footage gap, balcony access, financial motives... Wait, I missed something. The numbers 7-4-2-9 - what if they're not a code but a time? 7:42 AM? Or 19:42?",
    choices: [
        { label: "Check security logs for 7:42", nextScene: "case1_check_742" },
        { label: "That doesn't make sense", nextScene: "case1_after_interviews" }
    ]
};

scenes["case1_check_742"] = {
    background: "bg-penthouse",
    speaker: "Security Technician",
    text: "7:42 AM today? That's when Mara arrived. But wait... 19:42 yesterday - that's 7:42 PM. The logs show Mara entering then too. She said she left at 5 PM and didn't return until morning.",
    choices: [
        { label: "Confront Mara about this", nextScene: "case1_confront_mara" }
    ],
    effect: function() { addClue("maraLie"); }
};

scenes["case1_confront_mara"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "Alright, I lied. I came back at 7:42 PM because I forgot my tablet. But Marcus was fine then! We spoke briefly and I left. I didn't mention it because I didn't think it was important.",
    choices: [
        { label: "What did you talk about?", nextScene: "case1_mara_conversation" },
        { label: "What were you wearing?", nextScene: "case1_mara_clothing" }
    ]
};

scenes["case1_mara_conversation"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "He seemed nervous. Said he was expecting another visitor later. When I asked who, he said 'Just business.' He told me to take tomorrow off, which was unusual.",
    choices: [
        { label: "Who was the visitor?", nextScene: "case1_mara_visitor" }
    ]
};

scenes["case1_mara_visitor"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "I don't know! He wouldn't say. But... now that I think about it, he was looking at the security monitor when I left. The building directory showed Victor Stromwell was in the lobby.",
    choices: [
        { label: "Victor Stromwell?", nextScene: "case1_victor_reveal" }
    ]
};

scenes["case1_victor_reveal"] = {
    background: "bg-mara-appartment",
    speaker: "Detective",
    text: "Victor Stromwell - Marcus's biggest business rival. They've been fighting for years over patents. Victor owns a construction company and often wears dark blue work clothes.",
    choices: [
        { label: "The fiber evidence!", nextScene: "case1_victor_connection" }
    ]
};

scenes["case1_victor_connection"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "And Victor used to be a rock climber in college. He could have climbed between balconies or used equipment.",
    choices: [
        { label: "Confront Victor", nextScene: "case1_question_victor" }
    ]
};

scenes["case1_mara_clothing"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "I was wearing a black dress. Why? ...Oh, the fiber evidence. That's not from me. But you know who always wears dark blue? Victor Stromwell. He owns Stromwell Construction.",
    choices: [
        { label: "Victor Stromwell?", nextScene: "case1_victor_reveal2" }
    ]
};

scenes["case1_victor_reveal2"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "Yes, Marcus's biggest rival. They've been fighting over patents for years. Victor was in the building yesterday evening - I saw him on the security monitor when I left.",
    choices: [
        { label: "And Victor was a rock climber", nextScene: "case1_victor_climber" }
    ]
};

scenes["case1_victor_climber"] = {
    background: "bg-mara-appartment",
    speaker: "Mara",
    text: "Exactly! He could have accessed the balcony. And he always wears those dark blue company jackets.",
    choices: [
        { label: "Contfront Victor", nextScene: "case1_question_victor" }
    ]
};

scenes["case1_question_victor"] = {
    background: "bg-victor-office",
    speaker: "Victor",
    text: "This is outrageous! Yes, I was in the building yesterday. Business meeting on the 38th floor. I never went to the penthouse.",
    choices: [
        { label: "We have evidence placing you there", nextScene: "case1_victor_evidence" },
        { label: "Where were you at 10:45 PM?", nextScene: "case1_victor_alibi" } // Defined below
    ]
};

scenes["case1_victor_evidence"] = {
    background: "bg-victor-office",
    speaker: "Victor",
    text: "What evidence? I was home by 9 PM. My wife can verify that.",
    choices: [
        { label: "We have security footage", nextScene: "case1_victor_footage" },
        { label: "We found fibers from your clothing", nextScene: "case1_victor_fibers" } // Defined below
    ]
};

// *** NEW SCENE DEFINITION (Plot path refinement) ***
scenes["case1_victor_fibers"] = {
    background: "bg-victor-office",
    speaker: "Victor",
    text: "Fibers? That's ridiculous! I wear work jackets, yes, but those fibers are probably from the building's maintenance crew. You're grasping at straws, Detective.",
    choices: [
        { label: "We also have security footage showing you on the balcony", nextScene: "case1_victor_footage" },
        { label: "Where were you at 10:45 PM?", nextScene: "case1_victor_alibi" }
    ]
};

scenes["case1_victor_alibi"] = {
    background: "bg-victor-office",
    speaker: "Victor",
    text: "I told you, I was home by 9 PM. I was watching a late movie with my wife and went to bed around 11:30 PM. I never left the house after that.",
    choices: [
        { label: "Check the alibi against the camera footage", nextScene: "case1_victor_footage" },
        { label: "We found fibers from your clothing", nextScene: "case1_victor_fibers" }
    ]
};
// *****************************************

scenes["case1_victor_footage"] = {
    background: "bg-victor-office",
    speaker: "Victor",
    text: "Impossible! The penthouse cameras were... I mean, there's no footage of me because I wasn't there!",
    choices: [
        { label: "How did you know about the camera gap?", nextScene: "case1_victor_slip" }
    ]
};

scenes["case1_victor_slip"] = {
    background: "bg-victor-office",
    speaker: "Victor",
    text: "I... I heard it from building security. Everyone knows about the maintenance schedule.",
    choices: [
        { label: "That information isn't public", nextScene: "case1_victor_trapped" }
    ]
};

scenes["case1_victor_trapped"] = {
    background: "bg-victor-office",
    speaker: "Victor",
    text: "Alright, fine! I was there. Marcus was stealing my patents. He was going to ruin me. I confronted him, we argued... it got out of hand.",
    choices: [
        { label: "So you killed him", nextScene: "case1_victor_confession" }
    ]
};

scenes["case1_victor_confession"] = {
    background: "bg-interview-room-2",
    speaker: "Victor",
    text: "It was an accident! He came at me with a letter opener. I defended myself. The knife was mine - I always carry it for protection. When I realized he was dead, I panicked. I used my climbing gear to get back to my office balcony two floors down.",
    choices: [
        { label: "Make the arrest", nextScene: "case1_ending_true" }
    ]
};

// Case 1 Endings
scenes["case1_accusation"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Alright Detective, it's time to make your accusation. Who killed Marcus Aethelred?",
    choices: [
        {Â 
            label: "Mara - The Assistant",Â 
            nextScene: function() {Â 
                return "case1_ending_false";
            }Â 
        },
        {Â 
            label: "Alex - The Business Partner",Â 
            nextScene: function() {Â 
                return "case1_ending_false";
            }Â 
        },
        {Â 
            label: "Victor - The Rival CEO",Â 
            nextScene: function() {Â 
                if (gameState.clues.fiberEvidence && gameState.clues.securityFootage) {
                    return "case1_ending_true";
                } else {
                    return "case1_ending_false";
                }
            }Â 
        },
        {Â 
            label: "Elena - The Ex-Wife",Â 
            nextScene: function() {Â 
                return "case1_ending_false";
            }Â 
        },
        {Â 
            label: "I don't have enough evidence",Â 
            nextScene: "case1_ending_unsolved"Â 
        }
    ]
};

scenes["case1_ending_true"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Excellent work, Detective. Your evidence was solid and Victor Stromwell has confessed. Another case closed thanks to your sharp investigative skills.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ],
    sfx: "crowd"
};

scenes["case1_ending_false"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "I'm afraid you've accused the wrong person. The real killer remains at large, and we've damaged an innocent person's reputation. This will have consequences.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};

scenes["case1_ending_unsolved"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Without enough evidence to make an arrest, the case will remain open. The killer remains free, but perhaps new evidence will surface in time.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};
// --- Case 2 ---
       scenes["case2_intro"] = {
    background: "bg-boardwalk-intro",
    speaker: "Dispatch",
    text: "Detective, we have a possible homicide on the boardwalk. A local businessman, Benjamin Croft, was found dead this morning. Initially ruled as an accident, but there are suspicious circumstances.",
    choices: [
        { label: "Head to the boardwalk", nextScene: "case2_boardwalk_arrival" },
        { label: "Review the accident report", nextScene: "case2_review_report" }
    ],
    sfx: "sting"
};

scenes["case2_review_report"] = {
    background: "bg-detective-desk",
    speaker: "Detective",
    text: "Benjamin Croft, 48, owner of Croft Imports. Found at the base of the boardwalk stairs with head trauma. Apparent fall, but no witnesses. Security cameras were malfunctioning.",
    choices: [
        { label: "Head to the boardwalk", nextScene: "case2_boardwalk_arrival" }
    ]
};

scenes["case2_boardwalk_arrival"] = {
    background: "bg-boardwalk",
    speaker: "Officer Miller",
    text: "Detective, the body was found here at 6 AM by a jogger. Looks like he fell from the upper deck, but the railing shows no damage. No signs of struggle either.",
    choices: [
        { label: "Examine the body location", nextScene: "case2_examine_body" },
        { label: "Check the upper deck", nextScene: "case2_upper_deck" },
        { label: "Look for witnesses", nextScene: "case2_find_witnesses" },
        { label: "Check the evidence and interview suspects", nextScene: "case2_after_interviews" }
    ]
};

scenes["case2_examine_body"] = {
    background: "bg-upper-boardwalk",
    speaker: "Forensic Expert",
    text: "The victim has severe head trauma consistent with a fall. However, there are also faint bruises on his arms, like someone grabbed him. Time of death between 11 PM and 1 AM.",
    choices: [
        { label: "Look for defensive wounds", nextScene: "case2_defensive_wounds" },
        { label: "Check his personal effects", nextScene: "case2_personal_effects" },
        { label: "Return to main investigation", nextScene: "case2_boardwalk_arrival" }
    ]
};

scenes["case2_defensive_wounds"] = {
    background: "bg-upper-boardwalk",
    speaker: "Forensic Expert",
    text: "No defensive wounds, but there's something under his fingernails - looks like fabric fibers. **Gray cotton**. We'll analyze it.",
    choices: [
        { label: "Bag it as evidence", nextScene: "case2_fiber_evidence" }
    ]
};

scenes["case2_fiber_evidence"] = {
    background: "bg-tech-specialist-office",
    speaker: "Detective",
    text: "**Gray cotton** fibers under the fingernails. He might have grabbed his attacker's clothing during a struggle.",
    choices: [
        { label: "Continue investigation", nextScene: "case2_examine_body" }
    ]
};

scenes["case2_personal_effects"] = {
    background: "bg-tech-specialist-office",
    speaker: "Detective",
    text: "Wallet with cash, expensive watch, phone. In his pocket, a receipt from 'The Salty Dog' bar dated yesterday evening. Time stamp: 10:30 PM.",
    choices: [
        { label: "Visit The Salty Dog", nextScene: "case2_salty_dog" },
        { label: "Check his phone", nextScene: "case2_check_phone" },
        { label: "Return to body examination", nextScene: "case2_examine_body" }
    ]
};

scenes["case2_check_phone"] = {
    background: "bg-tech-specialist-office",
    speaker: "Tech Specialist",
    text: "Phone is password protected. Last call was to his business partner Jack at 9:45 PM. Several texts from his wife Isabella asking when he'd be home.",
    choices: [
        { label: "What do the texts say?", nextScene: "case2_isabella_texts" },
        { label: "Check other messages", nextScene: "case2_other_messages" }
    ]
};

scenes["case2_isabella_texts"] = {
    background: "bg-tech-specialist-office",
    speaker: "Detective",
    text: "Isabella's texts start at 10 PM: 'Where are you?' Then at 11:15: 'This is getting ridiculous.' At midnight: 'We need to talk about this.' Sounds like an argument.",
    choices: [
        { label: "Motive for Isabella", nextScene: "case2_isabella_motive" },
        { label: "Check other messages", nextScene: "case2_other_messages" }
    ]
};

scenes["case2_isabella_motive"] = {
    background: "bg-tech-specialist-office",
    speaker: "Detective",
    text: "Marital problems could be a motive. If they were fighting and she knew he was at the boardwalk...",
    choices: [
        { label: "Continue phone examination", nextScene: "case2_other_messages" }
    ]
};

scenes["case2_other_messages"] = {
    background: "bg-tech-specialist-office",
    speaker: "Tech Specialist",
    text: "There's an email from his business partner Jack: 'We need to discuss the buyout. Tonight.' Sent at 8 PM. Also a text from Olivia Sterling: 'Stay away from my business.'",
    choices: [
        { label: "Who is Olivia Sterling?", nextScene: "case2_olivia_info" },
        { label: "What buyout?", nextScene: "case2_buyout_info" },
        { label: "Return to investigation", nextScene: "case2_boardwalk_arrival" }
    ]
};

scenes["case2_olivia_info"] = {
    background: "bg-detective-desk",
    speaker: "Detective",
    text: "Olivia Sterling owns Sterling Souvenirs, the shop next to Croft Imports. They've been business rivals for years.",
    choices: [
        { label: "Motive for Olivia", nextScene: "case2_olivia_motive" },
        { label: "Check the buyout", nextScene: "case2_buyout_info" }
    ]
};

scenes["case2_olivia_motive"] = {
    background: "bg-detective-desk",
    speaker: "Detective",
    text: "Business rivalry can get intense. If Benjamin was threatening her livelihood...",
    choices: [
        { label: "Continue investigation", nextScene: "case2_other_messages" }
    ]
};

scenes["case2_buyout_info"] = {
    background: "bg-detective-desk",
    speaker: "Detective",
    text: "Jack wanted to buy out Benjamin's share of the business. Benjamin was refusing. This could be motive for Jack.",
    choices: [
        { label: "Strong financial motive", nextScene: "case2_jack_motive" },
        { label: "Return to investigation", nextScene: "case2_boardwalk_arrival" }
    ]
};

scenes["case2_jack_motive"] = {
    background: "bg-detective-desk",
    speaker: "Detective",
    text: "With Benjamin dead, Jack would get full control of the business. Definitely worth investigating.",
    choices: [
        { label: "Continue investigation", nextScene: "case2_other_messages" }
    ]
};

scenes["case2_upper_deck"] = {
    background: "bg-upper-boardwalk",
    speaker: "Detective",
    text: "The upper deck has a great view of the ocean. The railing where he supposedly fell shows no damage or scuff marks. Strange for someone falling over it.",
    choices: [
        { label: "Look for evidence on the deck", nextScene: "case2_deck_evidence" },
        { label: "Check for security cameras", nextScene: "case2_deck_cameras" },
        { label: "Return to main investigation", nextScene: "case2_boardwalk_arrival" }
    ]
};

scenes["case2_deck_evidence"] = {
    background: "bg-boardwalk",
    speaker: "Forensic Expert",
    text: "We found scuff marks on the deck floor, like someone was dragged. Also, a single **gray** button caught in a crack. It doesn't match the victim's clothing.",
    choices: [
        { label: "Bag the button", nextScene: "case2_button_evidence" }
    ]
};

scenes["case2_button_evidence"] = {
    background: "bg-boardwalk",
    speaker: "Detective",
    text: "A **gray** button, possibly from the attacker's clothing. This matches the **gray** fibers we found.",
    choices: [
        { label: "Continue investigation", nextScene: "case2_upper_deck" }
    ]
};

scenes["case2_deck_cameras"] = {
    background: "bg-boardwalk",
    speaker: "Officer Miller",
    text: "There's a security camera on the light pole, but it was vandalized yesterday. Maintenance was scheduled for today. Convenient timing.",
    choices: [
        { label: "Check nearby businesses for cameras", nextScene: "case2_nearby_cameras" },
        { label: "Return to deck investigation", nextScene: "case2_upper_deck" }
    ]
};

scenes["case2_nearby_cameras"] = {
    background: "bg-sterling-souvenirs",
    speaker: "Detective",
    text: "Sterling Souvenirs has a camera facing the street. It might have caught something.",
    choices: [
        { label: "Ask Olivia for the footage", nextScene: "case2_olivia_footage" },
        { label: "Get a warrant", nextScene: "case2_get_warrant" }
    ]
};

scenes["case2_olivia_footage"] = {
    background: "bg-sterling-souvenirs",
    speaker: "Olivia Sterling",
    text: "My camera? It's been broken for weeks. I haven't gotten around to fixing it. Sorry, can't help you.",
    choices: [
        { label: "She's lying", nextScene: "case2_olivia_lie" },
        { label: "Check other businesses", nextScene: "case2_other_businesses" }
    ]
};

scenes["case2_olivia_lie"] = {
    background: "bg-sterling-souvenirs",
    speaker: "Detective",
    text: "The camera light is on. It's clearly working. Why would she lie about this?",
    choices: [
        { label: "Confront her", nextScene: "case2_confront_olivia" },
        { label: "Get a warrant", nextScene: "case2_get_warrant" }
    ]
};

scenes["case2_confront_olivia"] = {
    background: "bg-sterling-souvenirs",
    speaker: "Olivia Sterling",
    text: "Alright, fine! The camera works. But I don't have to show you anything without a warrant.",
    choices: [
        { label: "We'll be back with a warrant", nextScene: "case2_get_warrant" }
    ]
};

scenes["case2_get_warrant"] = {
    background: "bg-police-station",
    speaker: "Judge",
    text: "Based on the evidence, I'm issuing a warrant for the security footage from Sterling Souvenirs.",
    choices: [
        { label: "Collect the footage", nextScene: "case2_collect_footage" }
    ]
};

scenes["case2_collect_footage"] = {
    background: "bg-tech-specialist-office",
    speaker: "Tech Specialist",
    text: "We have the footage. It shows Benjamin arguing with someone on the upper deck around 11:30 PM. The person is wearing a **gray** jacket. The quality is poor, but we can enhance it.",
    choices: [
        { label: "Enhance the footage", nextScene: "case2_enhance_footage" }
    ]
};

scenes["case2_enhance_footage"] = {
    background: "bg-tech-specialist-office",
    speaker: "Tech Specialist",
    text: "The enhanced footage shows Benjamin arguing with **Jack**. Jack is wearing a **gray** jacket. They struggle, and Jack pushes Benjamin over the railing.",
    choices: [
        { label: "Arrest Jack", nextScene: "case2_arrest_jack" }
    ]
};

scenes["case2_arrest_jack"] = {
    background: "bg-jacks-apartment",
    speaker: "Jack",
    text: "It was an accident! We were arguing about the buyout. He came at me, I pushed him away, and he went over the railing. I panicked and ran.",
    choices: [
        { label: "Make the arrest", nextScene: "case2_ending_true" }
    ]
};

scenes["case2_find_witnesses"] = {
    background: "bg-docks",
    speaker: "Officer Miller",
    text: "We found a homeless man who sleeps under the boardwalk. He says he heard arguing around 11:30 PM, then a loud thud. He saw a man in a **gray** jacket running away.",
    choices: [
        { label: "Can he identify the man?", nextScene: "case2_witness_id" },
        { label: "Show him photos", nextScene: "case2_show_photos" }
    ]
};

scenes["case2_witness_id"] = {
    background: "bg-docks",
    speaker: "Witness",
    text: "It was dark, but he was average height, wearing a **gray** jacket. I didn't see his face.",
    choices: [
        { label: "Not much to go on", nextScene: "case2_boardwalk_arrival" }
    ]
};

scenes["case2_show_photos"] = {
    background: "bg-docks",
    speaker: "Witness",
    text: "That's him! The one in the **gray** jacket in this photo. **Jack**, right? I've seen him around with Benjamin.",
    choices: [
        { label: "We have our suspect", nextScene: "case2_arrest_jack" }
    ]
};

scenes["case2_salty_dog"] = {
    background: "bg-salty-dog",
    speaker: "Bartender",
    text: "Yeah, Benjamin was here last night. He was meeting with Jack. They left together around 11 PM. Both seemed angry.",
    choices: [
        { label: "Did you hear what they argued about?", nextScene: "case2_bartender_info" },
        { label: "Anyone else with them?", nextScene: "case2_other_patrons" }
    ]
};

scenes["case2_bartender_info"] = {
    background: "bg-salty-dog",
    speaker: "Bartender",
    text: "Something about a business deal. Jack kept saying 'You're ruining everything' and Benjamin said 'It's my company too.'",
    choices: [
        { label: "Thanks for the information", nextScene: "case2_after_bar" }
    ]
};

scenes["case2_other_patrons"] = {
    background: "bg-salty-dog",
    speaker: "Bartender",
    text: "Olivia Sterling was here too, sitting at the other end of the bar. She left shortly after them.",
    choices: [
        { label: "Was she following them?", nextScene: "case2_olivia_following" },
        { label: "Return to investigation", nextScene: "case2_after_bar" }
    ]
};

scenes["case2_olivia_following"] = {
    background: "bg-salty-dog",
    speaker: "Bartender",
    text: "Now that you mention it, she did seem to be watching them. She paid her tab right after they left.",
    choices: [
        { label: "Suspicious", nextScene: "case2_after_bar" }
    ]
};

scenes["case2_after_bar"] = {
    background: "bg-docks",
    speaker: "Detective",
    text: "So Benjamin and Jack left together angry, and Olivia may have followed them. Both have motives.",
    choices: [
        { label: "Continue investigation", nextScene: "case2_boardwalk_arrival" }
    ]
};

scenes["case2_other_businesses"] = {
    background: "bg-boardwalk",
    speaker: "Detective",
    text: "Other nearby businesses had cameras, but none of them face the upper deck of the boardwalk. Sterling Souvenirs was our best bet for footage.",
    choices: [
        { label: "Get a warrant for Olivia's footage", nextScene: "case2_get_warrant" },
        { label: "Return to main investigation", nextScene: "case2_boardwalk_arrival" }
    ]
};

scenes["case2_after_interviews"] = {
    background: "bg-police-station",
    speaker: "Detective",
    text: "We have multiple suspects: Jack (financial motive), Isabella (marital motive), and Olivia (business motive). Time to bring them in.",
    choices: [
        { label: "Interview Jack", nextScene: "case2_interview_jack" },
        { label: "Interview Isabella", nextScene: "case2_interview_isabella" },
        { label: "Interview Olivia", nextScene: "case2_interview_olivia" },
        { label: "Make an accusation", nextScene: "case2_accusation" }
    ]
};

scenes["case2_interview_jack"] = {
    background: "bg-jacks-apartment",
    speaker: "Jack",
    text: "Yes, we argued at the bar and then on the boardwalk. It was about the buyout. I was wearing a **gray** jacket. But I left him there alive around 11:15 PM.",
    choices: [
        { label: "Where did you go?", nextScene: "case2_interview_jack_alibi" }
    ]
};

scenes["case2_interview_jack_alibi"] = {
    background: "bg-jacks-apartment",
    speaker: "Jack",
    text: "I went straight home. My wife was asleep, so I have no one to vouch for me. But I didn't kill him!",
    choices: [
        { label: "Check security camera footage", nextScene: "case2_nearby_cameras" },
        { label: "Return to interviews", nextScene: "case2_after_interviews" }
    ]
};

scenes["case2_interview_isabella"] = {
    background: "bg-interview-room",
    speaker: "Isabella",
    text: "We were having problems. I was frustrated and sent him some angry texts. I was home alone all evening. I didn't even know he was at the boardwalk.",
    choices: [
        { label: "Did you leave the house?", nextScene: "case2_interview_isabella_alibi" }
    ]
};

scenes["case2_interview_isabella_alibi"] = {
    background: "bg-interview-room",
    speaker: "Isabella",
    text: "No, I was here. I'll admit I was angry enough to go confront him, but I stayed home.",
    choices: [
        { label: "Return to interviews", nextScene: "case2_after_interviews" }
    ]
};

scenes["case2_interview_olivia"] = {
    background: "bg-interview-room-1",
    speaker: "Olivia",
    text: "I told him to stay away from my business because he was trying to undercut my suppliers. Yes, I was at the bar, but I left and went straight home. I hate Benjamin, but I didn't kill him.",
    choices: [
        { label: "Why did you lie about the camera?", nextScene: "case2_olivia_lie_2" }
    ]
};

scenes["case2_olivia_lie_2"] = {
    background: "bg-interview-room-1",
    speaker: "Olivia",
    text: "I didn't want you searching my property. I'm a private person. That's it. It has nothing to do with Benjamin.",
    choices: [
        { label: "Return to interviews", nextScene: "case2_after_interviews" }
    ]
};
// Case 2 Endings
scenes["case2_accusation"] = {
    background: "bg-police-station",
    speaker: "Captain",
    text: "Alright Detective, who killed Benjamin Croft?",
    choices: [
        {Â 
            label: "Jack - Business Partner",Â 
            nextScene: "case2_ending_true" // Assuming successful path was taken
        },
        {Â 
            label: "Olivia - Business Rival",Â 
            nextScene: "case2_ending_false"Â 
        },
        {Â 
            label: "Isabella - Wife",Â 
            nextScene: "case2_ending_false"Â 
        },
        {Â 
            label: "Accident",Â 
            nextScene: "case2_ending_false"Â 
        },
        {Â 
            label: "Not enough evidence",Â 
            nextScene: "case2_ending_unsolved"Â 
        }
    ]
};

scenes["case2_ending_true"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Excellent work. Jack has confessed to pushing Benjamin during an argument. It might have been unintentional, but he fled the scene and failed to report it.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ],
    sfx: "crowd"
};

scenes["case2_ending_false"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Wrong suspect. The real killer remains free, and we've compromised the investigation.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};

scenes["case2_ending_unsolved"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Without conclusive evidence, we can't make an arrest. The case will be filed as unsolved.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};
// Case 3: Theater poisoning
scenes["case3_intro"] = {
    background: "bg-theater-intro",
    speaker: "Dispatch",
    text: "Detective, we have a situation at the Grand Opera House. Celebrated actress Sophia LaRue collapsed during last night's performance and was pronounced dead at the scene. Initial tox screen suggests poisoning.",
    choices: [
        { label: "Head to the theater", nextScene: "case3_theater_arrival" },
        { label: "Review the victim's background", nextScene: "case3_review_background" }
    ],
    sfx: "sting"
};

scenes["case3_review_background"] = {
    background: "bg-detective-desk",
    speaker: "Detective",
    text: "Sophia LaRue, 34, lead actress in 'Midnight Sonata.' No known health issues. Had conflicts with several cast members according to theater gossip.",
    choices: [
        { label: "Head to the theater", nextScene: "case3_theater_arrival" }
    ]
};

scenes["case3_theater_arrival"] = {
    background: "bg-theater",
    speaker: "Officer Miller",
    text: "Detective, Sophia collapsed during the second act. She was drinking from a prop wine glass moments before. The glass tested positive for cyanide.",
    choices: [
        { label: "Examine the crime scene", nextScene: "case3_examine_scene" },
        { label: "Question the cast", nextScene: "case3_question_cast" },
        { label: "Check backstage evidence", nextScene: "case3_backstage" },
        { label: "Make an accusation", nextScene: "case3_accusation" }
    ]
};

scenes["case3_examine_scene"] = {
    background: "bg-prop-table",
    speaker: "Forensic Expert",
    text: "The prop wine glass has traces of cyanide. Only Sophia's fingerprints are on it. The bottle backstage is clean. Someone poisoned just her glass.",
    choices: [
        { label: "Check for other evidence", nextScene: "case3_more_evidence" },
        { label: "Who had access to the glass?", nextScene: "case3_glass_access" },
        { label: "Return to main investigation", nextScene: "case3_theater_arrival" }
    ]
};

scenes["case3_more_evidence"] = {
    background: "bg-backstage",
    speaker: "Forensic Expert",
    text: "We found a small vial backstage containing residue that matches the poison. No fingerprints though.",
    choices: [
        { label: "Bag the vial", nextScene: "case3_vial_evidence" }
    ]
};

scenes["case3_vial_evidence"] = {
    background: "bg-backstage",
    speaker: "Detective",
    text: "A poison vial backstage. The killer must have disposed of it in a hurry.",
    choices: [
        { label: "Continue investigation", nextScene: "case3_examine_scene" }
    ]
};

scenes["case3_glass_access"] = {
    background: "bg-prop-table",
    speaker: "Stage Manager",
    text: "The prop master prepares the glasses before the show. Then they're placed on a tray backstage. Several people had access: the understudy Marco, the director Arthur, and Sophia herself.",
    choices: [
        { label: "Who benefits from her death?", nextScene: "case3_benefactors" },
        { label: "Check alibis", nextScene: "case3_check_alibis" }
    ]
};

scenes["case3_benefactors"] = {
    background: "bg-backstage",
    speaker: "Detective",
    text: "Marco becomes the lead. Victoria, her rival, gets her dressing room. Arthur receives a large insurance payout.",
    choices: [
        { label: "Multiple motives", nextScene: "case3_examine_scene" }
    ]
};

scenes["case3_check_alibis"] = {
    background: "bg-theater",
    speaker: "Officer Miller",
    text: "Marco claims to be in his room. Victoria claims she was in the green room. Arthur claims he was in the audience. We need to verify these.",
    choices: [
        { label: "Return to scene examination", nextScene: "case3_examine_scene" }
    ]
};

scenes["case3_question_cast"] = {
    background: "bg-backstage",
    speaker: "Detective",
    text: "The cast is gathered in the green room. Who do you want to question first?",
    choices: [
        { label: "Marco - The Understudy", nextScene: "case3_question_marco" },
        { label: "Victoria - Rival Actress", nextScene: "case3_question_victoria" },
        { label: "Arthur - The Director", nextScene: "case3_question_arthur" },
        { label: "Return to investigation", nextScene: "case3_theater_arrival" }
    ]
};

scenes["case3_question_marco"] = {
    background: "bg-marcos-dressing-room",
    speaker: "Marco",
    text: "I can't believe she's gone. Yes, I'm the understudy, but I would never hurt Sophia. We were friends!",
    choices: [
        { label: "Where were you before the show?", nextScene: "case3_marco_alibi" },
        { label: "Did you have issues with Sophia?", nextScene: "case3_marco_issues" },
        { label: "Question someone else", nextScene: "case3_question_cast" }
    ]
};

scenes["case3_marco_alibi"] = {
    background: "bg-marcos-dressing-room",
    speaker: "Marco",
    text: "I was in my dressing room until curtain call. The costume designer can confirm that.",
    choices: [
        { label: "We'll verify that", nextScene: "case3_marco_continue" }
    ]
};

scenes["case3_marco_issues"] = {
    background: "bg-marcos-dressing-room",
    speaker: "Marco",
    text: "We had some creative differences, but nothing serious. She was difficult to work with sometimes, but that's true of many talented actors.",
    choices: [
        { label: "Continue questioning", nextScene: "case3_marco_continue" }
    ]
};

scenes["case3_marco_continue"] = {
    background: "bg-marcos-dressing-room",
    speaker: "Marco",
    text: "Look, I admired Sophia. I wouldn't kill her just to get the lead role. That's monstrous!",
    choices: [
        { label: "Question someone else", nextScene: "case3_question_cast" }
    ]
};

scenes["case3_question_victoria"] = {
    background: "bg-victoria-dressing-room",
    speaker: "Victoria",
    text: "This is terrible! Sophia and I had our differences, but I would never wish this on anyone.",
    choices: [
        { label: "What differences?", nextScene: "case3_victoria_differences" },
        { label: "Where were you before the show?", nextScene: "case3_victoria_alibi" },
        { label: "Question someone else", nextScene: "case3_question_cast" }
    ]
};

scenes["case3_victoria_differences"] = {
    background: "bg-victoria-dressing-room",
    speaker: "Victoria",
    text: "She got the lead role that I was promised. The director changed his mind at the last minute. But I've moved on.",
    choices: [
        { label: "That sounds like a strong motive", nextScene: "case3_victoria_motive" }
    ]
};

scenes["case3_victoria_motive"] = {
    background: "bg-victoria-dressing-room",
    speaker: "Victoria",
    text: "Are you accusing me? I have an alibi! I was with the MakeUp Artist until five minutes before curtain.",
    choices: [
        { label: "We'll check that", nextScene: "case3_victoria_continue" }
    ]
};

scenes["case3_victoria_alibi"] = {
    background: "bg-victoria-dressing-room",
    speaker: "Victoria",
    text: "I was in the green room with several other cast members. They can all vouch for me.",
    choices: [
        { label: "We'll verify that with the cast", nextScene: "case3_victoria_verify_alibi" }
    ]
};

scenes["case3_victoria_verify_alibi"] = {
    background: "bg-victoria-dressing-room",
    speaker: "Makeup Artist",
    text: "Yes, Victoria was here with me working on her understudy dress. She didn't leave the green room until the stage manager called for places.",
    choices: [
        { label: "Alibi is solid", nextScene: "case3_victoria_continue" }
    ]
};

scenes["case3_victoria_continue"] = {
    background: "bg-victoria-dressing-room",
    speaker: "Victoria",
    text: "I'm devastated by what happened, but I'm innocent. You're wasting time questioning me.",
    choices: [
        { label: "Question someone else", nextScene: "case3_question_cast" }
    ]
};

scenes["case3_question_arthur"] = {
    background: "bg-directors-office",
    speaker: "Arthur",
    text: "A tragedy! Sophia was brilliant, if difficult. This will close the production.",
    choices: [
        { label: "What do you mean 'difficult'?", nextScene: "case3_arthur_difficult" },
        { label: "Where were you before the show?", nextScene: "case3_arthur_alibi" },
        { label: "Question someone else", nextScene: "case3_question_cast" }
    ]
};

scenes["case3_arthur_difficult"] = {
    background: "bg-directors-office",
    speaker: "Arthur",
    text: "She was demanding rewrites, changing blocking, arguing with everyone. The insurance on this production is substantial though.",
    choices: [
        { label: "Insurance?", nextScene: "case3_insurance_info" }
    ]
};

scenes["case3_insurance_info"] = {
    background: "bg-directors-office",
    speaker: "Arthur",
    text: "The show is insured against the lead actor being unable to perform. With Sophia gone, we collect the insurance money.",
    choices: [
        { label: "Financial motive", nextScene: "case3_arthur_motive" }
    ]
};

scenes["case3_arthur_motive"] = {
    background: "bg-directors-office",
    speaker: "Arthur",
    text: "That's ridiculous! The insurance doesn't cover murder. I'd be the prime suspect!",
    choices: [
        { label: "Continue questioning", nextScene: "case3_arthur_continue" }
    ]
};

scenes["case3_arthur_alibi"] = {
    background: "bg-directors-office",
    speaker: "Arthur",
    text: "I was in the audience talking to critics until five minutes before the show. Then I went backstage briefly before taking my seat.",
    choices: [
        { label: "You were backstage?", nextScene: "case3_arthur_backstage" }
    ]
};

scenes["case3_arthur_backstage"] = {
    background: "bg-directors-office",
    speaker: "Arthur",
    text: "Just to wish everyone luck! I didn't go near the props.",
    choices: [
        { label: "Verify this with the critics", nextScene: "case3_arthur_verify_alibi" }
    ]
};

scenes["case3_arthur_verify_alibi"] = {
    background: "bg-theater",
    speaker: "Theater Critic",
    text: "Yes, Arthur was with us in the audience, then we saw him duck backstage for a few minutes right before the lights dimmed. He was in the audience during the curtain call, which is before the poisoning window.",
    choices: [
        { label: "Alibi holds up", nextScene: "case3_arthur_continue" }
    ]
};

scenes["case3_arthur_continue"] = {
    background: "bg-directors-office",
    speaker: "Arthur",
    text: "I want Sophia's killer found as much as you do. This is my production, my reputation!",
    choices: [
        { label: "Question someone else", nextScene: "case3_question_cast" }
    ]
};

scenes["case3_backstage"] = {
    background: "bg-backstage",
    speaker: "Detective",
    text: "The backstage area is crowded with props, costumes, and dressing rooms. The prop table where the wine glass was kept is near the stage entrance.",
    choices: [
        { label: "Search Marco's dressing room", nextScene: "case3_search_marco" },
        { label: "Search Victoria's dressing room", nextScene: "case3_search_victoria" },
        { label: "Search Arthur's office", nextScene: "case3_search_arthur" },
        { label: "Interview Costume Designer", nextScene: "case3_check_dresser" }, 
        { label: "Return to main investigation", nextScene: "case3_theater_arrival" }
    ]
};

scenes["case3_search_marco"] = {
    background: "bg-marcos-dressing-room",
    speaker: "Officer Miller",
    text: "We found a **chemistry textbook** in Marco's dressing room with pages bookmarked about poisons. Also, a love letter to Sophia that was never sent.",
    choices: [
        { label: "Suspicious", nextScene: "case3_marco_evidence" }
    ]
};

scenes["case3_marco_evidence"] = {
    background: "bg-marcos-dressing-room",
    speaker: "Detective",
    text: "A chemistry book with poison information and an unrequited love for Sophia. Either could be motive.",
    choices: [
        { label: "Continue searching", nextScene: "case3_backstage" }
    ]
};

scenes["case3_search_victoria"] = {
    background: "bg-victoria-dressing-room",
    speaker: "Officer Miller",
    text: "Victoria's dressing room has newspaper clippings about Sophia's career with angry notes written in the margins. 'My role' circled repeatedly. Pure revenge motive.",
    choices: [
        { label: "Strong resentment", nextScene: "case3_victoria_evidence" }
    ]
};

scenes["case3_victoria_evidence"] = {
    background: "bg-victoria-dressing-room",
    speaker: "Detective",
    text: "Victoria clearly resented Sophia for taking her role. This could have pushed her over the edge, but her alibi remains solid.",
    choices: [
        { label: "Continue searching", nextScene: "case3_backstage" }
    ]
};

scenes["case3_search_arthur"] = {
    background: "bg-directors-office",
    speaker: "Officer Miller",
    text: "Arthur's office has financial documents showing the production was massively over budget. The **insurance payout** would save him from bankruptcy.",
    choices: [
        { label: "Financial pressure", nextScene: "case3_arthur_evidence" }
    ]
};

scenes["case3_arthur_evidence"] = {
    background: "bg-backstage",
    speaker: "Detective",
    text: "Arthur was under severe financial pressure. The insurance money would solve his problems, but he was confirmed to be in the audience during the poisoning window.",
    choices: [
        { label: "Continue searching", nextScene: "case3_backstage" }
    ]
};

scenes["case3_check_dresser"] = {
    background: "bg-marcos-dressing-room",
    speaker: "Costume Designer",
    text: "Marco was in his dressing room most of the time, but he did leave for about ten minutes to 'get some air.' But you didn't hear it from me! That was 30 minutes before curtain...The prop table is right outside his door.",
    choices: [
        { label: "Marco's alibi is broken", nextScene: "case3_marco_opportunity" }
    ]
};

scenes["case3_marco_opportunity"] = {
    background: "bg-detective-desk",
    speaker: "Detective",
    text: "Marco had the **opportunity** (10 minutes alone near the props), the **means** (chemistry knowledge and a poison vial was found), and a **motive** (unrequited love/rejection).",
    choices: [
        { label: "Confront Marco", nextScene: "case3_confront_marco" },
        { label: "Review other suspects (Victoria/Arthur)", nextScene: "case3_question_cast" }
    ]
};

scenes["case3_confront_marco"] = {
    background: "bg-interview-room-1", 
    speaker: "Marco",
    text: "Alright, yes! I loved her! When she rejected me, I was angry. I thought if I made her sick, I could care for her and she'd see how much I loved her. I didn't mean to kill her! I used the poison I studied in that book.",
    choices: [
        { label: "Arrest him", nextScene: "case3_ending_true" }
    ]
};

// Case 3 Endings
scenes["case3_accusation"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Alright Detective, who poisoned Sophia LaRue?",
    choices: [
        {Â 
            label: "Marco - The Understudy",Â 
            nextScene: "case3_ending_true" 
        },
        {Â 
            label: "Victoria - Rival Actress",Â 
            nextScene: "case3_ending_false"Â 
        },
        {Â 
            label: "Arthur - The Director",Â 
            nextScene: "case3_ending_false"Â 
        },
        {Â 
            label: "Accident",Â 
            nextScene: "case3_ending_false"Â 
        },
        {Â 
            label: "Not enough evidence",Â 
            nextScene: "case3_ending_unsolved"Â 
        }
    ]
};

scenes["case3_ending_true"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Excellent work. Marco has confessed to the poisoning. He meant to make her ill, not kill her, but his actions still resulted in murder.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ],
    sfx: "crowd"
};

scenes["case3_ending_false"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Wrong suspect. The real poisoner remains free to potentially strike again.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};

scenes["case3_ending_unsolved"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Without enough evidence, we can't make an arrest. The case will remain open, but leads are growing cold.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};
  // Case 4
   scenes["case4_intro"] = {
    background: "bg-coup-intro",
    speaker: "Dispatch",
    text: "Detective, we have a case on the 60th floor of the NovaTech building. Jasper Vance, the CEO, is dead in his executive suite. It appears to be suicide, but the responding team is holding the scene. Locked office, no weapon.",
    choices: [
        { label: "Proceed to NovaTech HQ", nextScene: "case4_office_arrival" },
        { label: "Check the victim's profile", nextScene: "case4_review_profile" }
    ],
    sfx: "sting"
};

scenes["case4_review_profile"] = {
    background: "bg-police-station",
    speaker: "Detective",
    text: "Jasper Vance, 55, known for ruthless business practices. Recently faced an internal power struggle with his CFO, Julian, and had a very strained relationship with his daughter, Isabel.",
    choices: [
        { label: "Proceed to NovaTech HQ", nextScene: "case4_office_arrival" }
    ]
};

scenes["case4_office_arrival"] = {
    background: "bg-elias-office",
    speaker: "Officer Ramirez",
    text: "The body is here by the desk. Door was locked from the inside. We had to have security use the master key. Cause of death looks like rapid poisoning. There's a bottle of unlabeled medicine on the desk.",
    choices: [
        { label: "Examine the desk and body", nextScene: "case4_examine_desk" },
        { label: "Interview the people waiting outside", nextScene: "case4_interview_start" },
        { label: "Check security footage of the hallway", nextScene: "case4_check_security" }
    ]
};

scenes["case4_examine_desk"] = {
    background: "bg-elias-office",
    speaker: "Forensic Tech",
    text: "The victim has no external injuries. The unlabeled bottle contains a white liquid. Next to it, in the small, upscale waste bin, we found highly **shredded paper fragments**.",
    choices: [
        { label: "Analyze the unlabeled liquid (Misdirect)", nextScene: "case4_liquid_analysis" },
        { label: "Send the shredded paper for reconstruction", nextScene: "case4_shredded_paper" },
        { label: "Return to investigation", nextScene: "case4_office_arrival" }
    ]
};

// --- Misdirect Clue Path ---
scenes["case4_liquid_analysis"] = {
    background: "bg-tech-specialist-office",
    speaker: "Tech Specialist",
    text: "Analysis complete. The liquid in the bottle is a simple, high-dose **vitamin C solution**â€”not poison. The victim died from a cyanide-based toxin, likely ingested in his last drink.",
    choices: [
        { label: "The poison must have been in the coffee or water", nextScene: "case4_liquid_result" }
    ]
};

scenes["case4_liquid_result"] = {
    background: "bg-elias-office",
    speaker: "Detective",
    text: "Someone placed the vitamin bottle here to look like the murder weapon. This wasn't a suicide or a simple poisoning. It was designed to look like a self-administered overdose.",
    choices: [
        { label: "Return to investigation", nextScene: "case4_office_arrival" }
    ]
};

// --- Key Evidence Path ---
scenes["case4_shredded_paper"] = {
    background: "bg-tech-specialist-office",
    speaker: "Forensic Expert",
    text: "The paper is heavily cross-shredded. It will take time, but we can reconstruct it. It looks like an official NovaTech document, possibly an expense report.",
    choices: [
        { label: "Follow up on reconstruction later", nextScene: "case4_office_arrival" }
    ]
};

// --- Suspect Interviews ---
scenes["case4_interview_start"] = {
    background: "bg-novatech-hallway",
    speaker: "Detective",
    text: "Three key people are waiting: Julian, the CFO; Clara, the personal assistant; and Isabel, the daughter.",
    choices: [
        { label: "Question Julian (CFO)", nextScene: "case4_question_julian" },
        { label: "Question Clara (Personal Assistant)", nextScene: "case4_question_clara" },
        { label: "Question Isabel (Daughter)", nextScene: "case4_question_isabel" },
        { label: "Return to office investigation", nextScene: "case4_office_arrival" }
    ]
};

// --- Julian (The Misdirect/Red Herring) ---
scenes["case4_question_julian"] = {
    background: "bg-Julians-Office",
    speaker: "Julian (CFO)",
    text: "This is a tragedy, but frankly, Jasper was under immense pressure. I was about to execute a vote of no confidence to take over. I didn't need to kill him; I was winning the corporate battle.",
    choices: [
        { label: "You had the strongest motive to take power", nextScene: "case4_julian_motive" },
        { label: "What is your alibi?", nextScene: "case4_julian_alibi" },
        { label: "Back to suspects", nextScene: "case4_interview_start" }
    ]
};

scenes["case4_julian_motive"] = {
    background: "bg-Julians-Office",
    speaker: "Julian (CFO)",
    text: "His death is worse for me now, Detective. It triggers complex succession rules that could freeze my ascent. I was prepared for a clean takeover, not this messy situation.",
    choices: [
        { label: "Continue questioning", nextScene: "case4_question_julian" }
    ]
};

scenes["case4_julian_alibi"] = {
    background: "bg-Julians-Office",
    speaker: "Julian (CFO)",
    text: "I was on the phone with our Asian partners until the police arrived. My secretary was there. But, I admit, I was the only person with a key to his private beverage cabinet...if that was the method.",
    choices: [
        { label: "He has opportunity and motive, but a strong alibi witness", nextScene: "case4_interview_julian_summary" }
    ]
};

scenes["case4_interview_julian_summary"] = {
    background: "bg-Julians-Office",
    speaker: "Detective",
    text: "Julian has a clear motive (power) and opportunity (key to cabinet). He is the obvious suspect, but his explanation for the 'suicide' being bad for him is plausible.",
    choices: [
        { label: "Back to suspects", nextScene: "case4_interview_start" }
    ]
};

// --- Isabel (The Inheritor) ---
scenes["case4_question_isabel"] = {
    background: "bg-novatech-lobby",
    speaker: "Isabel (Daughter)",
    text: "My father and I hadn't spoken in years. He cut me out of the main trust. I flew in this morning hoping to reconcile and argue my case, but I was too late.",
    choices: [
        { label: "Did you stand to inherit anything?", nextScene: "case4_isabel_motive" },
        { label: "What is your alibi?", nextScene: "case4_isabel_alibi" },
        { label: "Back to suspects", nextScene: "case4_interview_start" }
    ]
};

scenes["case4_isabel_motive"] = {
    background: "bg-novatech-lobby",
    speaker: "Isabel (Daughter)",
    text: "Only a small, antique investment portfolio. Nothing substantial. The main controlling shares go to the company board, which is what Julian wanted.",
    choices: [
        { label: "Motive is weak", nextScene: "case4_question_isabel" }
    ]
};

scenes["case4_isabel_alibi"] = {
    background: "bg-novatech-lobby",
    speaker: "Isabel (Daughter)",
    text: "I was on a cross-country flight, landing just after the estimated time of death. The airline records can verify that.",
    choices: [
        { label: "Alibi is solid", nextScene: "case4_interview_start" }
    ]
};

// --- Clara (The Real Killer) ---
scenes["case4_question_clara"] = {
    background: "bg-administrative-office",
    speaker: "Clara (Personal Assistant)",
    text: "Mr. Vance was a demanding boss, but I was devoted to him. I was the last person to see him alive. I brought him his daily tea and then left to handle his calendar.",
    choices: [
        { label: "Did you bring anything else to his office?", nextScene: "case4_clara_delivery" },
        { label: "What time was this?", nextScene: "case4_clara_alibi" },
        { label: "Back to suspects", nextScene: "case4_interview_start" }
    ]
};

scenes["case4_clara_delivery"] = {
    background: "bg-administrative-office",
    speaker: "Clara (Personal Assistant)",
    text: "No, just his green tea. He drank it every day at 10:00 AM. I left immediately after. Oh, I did also deliver his small, weekly expense report for approval.",
    choices: [
        { label: "The tea was poisoned", nextScene: "case4_clara_suspicion" }
    ]
};

scenes["case4_clara_alibi"] = {
    background: "bg-administrative-office",
    speaker: "Clara (Personal Assistant)",
    text: "10:05 AM, I was in the administrative office, two floors down. Plenty of witnesses saw me there working on a presentation.",
    choices: [
        { label: "Alibi is weak, she had the perfect chance", nextScene: "case4_clara_suspicion" }
    ]
};

scenes["case4_clara_suspicion"] = {
    background: "bg-administrative-office",
    speaker: "Detective",
    text: "Clara had the opportunity to poison the tea. But why the shredded report? And what's her motive?",
    choices: [
        { label: "Check on the shredded report reconstruction", nextScene: "case4_reconstruct_report_check" }
    ]
};

// --- Clue Synthesis and Deduction ---

scenes["case4_check_security"] = {
    background: "bg-tech-specialist-office",
    speaker: "Security Chief",
    text: "The surveillance cameras confirm the door was only accessed twice in the 30-minute window before the body was found. Once by Clara, the PA, and once by the janitor who verified the lock status after the event.",
    choices: [
        { label: "Clara had sole access to the locked office", nextScene: "case4_office_arrival" }
    ]
};

scenes["case4_reconstruct_report_check"] = {
    background: "bg-tech-specialist-office",
    speaker: "Forensic Expert",
    text: "The shredded document has been painstakingly reconstructed. It's a NovaTech expense report filed by Clara, the PA. It's titled: **'Lab Supplies - 1 Week.'**",
    choices: [
        { label: "Read the reconstructed report", nextScene: "case4_reconstructed_report_reveal" }
    ]
};

scenes["case4_reconstructed_report_reveal"] = {
    background: "bg-detective-desk",
    speaker: "Detective",
    text: "The key line on the reconstructed report is: **'Purchase of highly corrosive chemical agent (Industrial Cleaner) - $150.'** It's signed by Clara and approved by Jasper. The 'cleaner' is a common cover for purchasing cyanide or other potent toxins in small quantities.",
    choices: [
        { label: "The expense report is the key", nextScene: "case4_clara_motive_reveal" }
    ]
};

scenes["case4_clara_motive_reveal"] = {
    background: "bg-detective-desk",
    speaker: "Detective",
    text: "We need the motive. Why would Clara, the loyal assistant, murder her boss?",
    choices: [
        { label: "Rethink Clara's loyalty", nextScene: "case4_clara_investigation" },
        { label: "Confront Clara with the report", nextScene: "case4_confront_clara" }
    ]
};

scenes["case4_clara_investigation"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "A quick background check on Clara shows she was deeply involved in an animal rescue charity that Jasper Vance publicly ridiculed and threatened to shut down just last week.",
    choices: [
        { label: "Motive: Personal Revenge", nextScene: "case4_confront_clara" }
    ]
};

scenes["case4_confront_clara"] = {
    background: "bg-interview-room-2",
    speaker: "Clara (Personal Assistant)",
    text: "I trusted him, I gave him years of my life. But when he threatened to ruin my charity, I knew he was truly evil! I poisoned his tea, locked the door behind me, and shredded the report so no one would connect me to the purchase! You don't have the original, only fragments!",
    choices: [
        { label: "Arrest Clara", nextScene: "case4_ending_true" }
    ]
};

// --- Endings ---
scenes["case4_accusation"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Alright Detective, who killed Jasper Vance and how did they lock the office?",
    choices: [
        {Â 
            label: "Clara - The Personal Assistant",Â 
            nextScene: "case4_ending_true" 
        },
        {Â 
            label: "Julian - The CFO (Misdirect)",Â 
            nextScene: "case4_ending_false_julian"Â 
        },
        {Â 
            label: "Isabel - The Daughter",Â 
            nextScene: "case4_ending_false_isabel"Â 
        },
        {Â 
            label: "Suicide",Â 
            nextScene: "case4_ending_false_suicide"Â 
        },
        {Â 
            label: "Not enough evidence",Â 
            nextScene: "case4_ending_unsolved"Â 
        }
    ]
};

scenes["case4_ending_true"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Clara confessed. The misdirect of the vitamin bottle and the locked door was brilliant, but the shredded expense report proved she bought the poison and had the opportunity to administer it in his tea. Case closed.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ],
    sfx: "crowd"
};

scenes["case4_ending_false_julian"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Julian's secretary confirmed his alibi. He was a red herring. The real killer remains free, and the investigation is a mess.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};

scenes["case4_ending_false_isabel"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Isabel's flight records confirm she was 30,000 feet in the air during the time of death. Wrong suspect.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};

scenes["case4_ending_false_suicide"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "The medical examiner confirmed it was cyanide poisoning, and the vitamin bottle on the desk was a setup. This was murder, Detective. Get back to work.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};

scenes["case4_ending_unsolved"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Without definitive proof, we cannot make an arrest. The case goes cold.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};     
// Case 5
scenes["case5_intro"] = {
    background: "bg-cruise-deck",
    speaker: "Captain Petrov",
    text: "Detective, thank you for coming up. One of our guests, Alistair, has vanished. We found this blood trail leading to the railing of the Observation Deck. It's clear: he was murdered and thrown overboard.",
    choices: [
        { label: "Examine the scene", nextScene: "case5_examine_deck" },
        { label: "Interview witnesses and staff", nextScene: "case5_interview_start" }
    ],
    sfx: "sting"
};

scenes["case5_examine_deck"] = {
    background: "bg-cruise-observation-deck",
    speaker: "Forensic Tech",
    text: "The victim was struck hardâ€”blunt force trauma. There are drag marks across the deck tiles, ending abruptly at the railing. Based on the height of this deck, it would take **considerable strength** to lift and propel a body of Alistair's size over the side.",
    choices: [
        { label: "Search the immediate area", nextScene: "case5_search_area_nothing" },
        { label: "Focus on strong suspects", nextScene: "case5_interview_start" },
        { label: "Return to investigation", nextScene: "case5_intro" }
    ]
};
scenes["case5_search_area_nothing"] = {
    background: "bg-cruise-observation-deck",
    speaker: "Detective",
    text: "We found **nothing** near the railingâ€”no weapon, no identifiable personal belongings. The killer took great care to remove every piece of physical evidence.",
    choices: [
       { label: "Return to investigation", nextScene: "case5_examine_deck" }
    ]
};
// --- Suspect Interviews ---
scenes["case5_interview_start"] = {
    background: "bg-cruise-deck",
    speaker: "Detective",
    text: "The main suspects are gathered. Remember, we are looking for someone with **extreme physical capability**.",
    choices: [
        { label: "Question Samantha (Debt Collector)", nextScene: "case5_question_samantha" },
        { label: "Question Edgar (Rival Gambler)", nextScene: "case5_question_edgar" },
        { label: "Question Bridget (Crew Member)", nextScene: "case5_question_bridget" },
        { label: "Question Arthur (Elderly Passenger)", nextScene: "case5_question_arthur" },
        { label: "Return to investigation", nextScene: "case5_intro" }
    ]
};
// --- Samantha (Strong Misdirect) ---
scenes["case5_question_samantha"] = {
    background: "bg-cruise-deck",
    speaker: "Samantha",
    text: "I'm a debt recovery agent. Alistair owed my client a fortune. Yes, I confronted him violently in the casino bar last night, but I left him alive and well to continue chasing him.",
    choices: [
        { label: "Your physical strength is notable", nextScene: "case5_samantha_strength" },
        { label: "What is your alibi?", nextScene: "case5_samantha_alibi" },
        { label: "Back to suspects", nextScene: "case5_interview_start" }
    ]
};

scenes["case5_samantha_strength"] = {
    background: "bg-cruise-deck",
    speaker: "Samantha",
    text: "I can handle myself, Detective. But I wouldn't kill the goose that lays the golden egg. Dead, Alistair is useless to me.",
    choices: [
        { label: "Continue questioning", nextScene: "case5_question_samantha" }
    ]
};

scenes["case5_samantha_alibi"] = {
    background: "bg-cruise-deck",
    speaker: "Samantha",
    text: "After the argument, I was in the ship's gym until 2 AM, then went straight back to my cabin. The gym attendant saw me leave.",
    choices: [
        { label: "Verify alibi", nextScene: "case5_verify_samantha" }
    ]
};

scenes["case5_verify_samantha"] = {
    background: "bg-cruise-gym",
    speaker: "Gym Attendant",
    text: "Yeah, Samantha was here. She was bench-pressing serious weight. She looked mad, but she was definitely in the gym during the time of death.",
    choices: [
        { label: "Alibi is solid, but she has the strength and motive", nextScene: "case5_interview_start" }
    ]
};

// --- Edgar (Rival Misdirect) ---
scenes["case5_question_edgar"] = {
    background: "bg-cruise-casino",
    speaker: "Edgar",
    text: "Alistair cheated me out of a huge sum during poker. We had a final, high-stakes game scheduled for today. His death means I lose my chance for revenge and recovery.",
    choices: [
        { label: "What is your alibi?", nextScene: "case5_edgar_alibi" },
        { label: "Back to suspects", nextScene: "case5_interview_start" }
    ]
};

scenes["case5_edgar_alibi"] = {
    background: "bg-cruise-casino",
    speaker: "Edgar",
    text: "I was in the casino, drinking with Oscar until the early morning. Ask Hannah, the bartender, she'll tell you how much we drank. I passed out in my cabin shortly after.",
    choices: [
        { label: "Question Hannah, the bartender", nextScene: "case5_verify_edgar" }
    ]
};

scenes["case5_verify_edgar"] = {
    background: "bg-casino-bar",
    speaker: "Hannah (Bartender)",
    text: "Edgar and Oscar were definitely here and plastered. They left together around 1:30 AM. They looked like they could barely stand, let alone throw a body.",
    choices: [
        { label: "Edgar is too drunk to be the killer", nextScene: "case5_interview_start" }
    ]
};

// --- Bridget (Crew Member) ---
scenes["case5_question_bridget"] = {
    background: "bg-cruise-cabin",
    speaker: "Bridget",
    text: "I'm a stewardess. I never interacted with Mr. Alistair. I was cleaning cabins on a lower deck all night. I don't know anything.",
    choices: [
        { label: "Did you find anything unusual?", nextScene: "case5_bridget_unusual" },
        { label: "Back to suspects", nextScene: "case5_interview_start" }
    ]
};

// *** FIX APPLIED HERE ***
scenes["case5_bridget_unusual"] = {
    background: "bg-cruise-cabin",
    speaker: "Bridget",
    text: "Well... I did see an old man, Arthur, acting strangely near the maintenance hatch on the observation deck around midnight. He looked like he was fumbling with something metallic.",
    choices: [
        { label: "Investigate Arthur's background/motive", nextScene: "case5_investigate_arthur_background" }
    ]
};

// --- Arthur (The Elderly Killer/Ultimate Misdirect) ---
scenes["case5_question_arthur"] = {
    background: "bg-arthur-cabin",
    speaker: "Arthur",
    text: "Oh dear, this is dreadful. I'm 78 years old. I haven't been on the Observation Deck in days. I was in my cabin sleeping. My knees wouldn't allow me to lift a heavy novel, let alone a man!",
    choices: [
        { label: "Check his cabin", nextScene: "case5_search_arthur_cabin" },
        { label: "Check his motive", nextScene: "case5_arthur_motive" },
        { label: "Back to suspects", nextScene: "case5_interview_start" }
    ]
};

scenes["case5_arthur_motive"] = {
    background: "bg-arthur-cabin",
    speaker: "Arthur",
    text: "Motive? I've been retired for twenty years. I barely know the man. I came here for peace and quiet, not drama.",
    choices: [
        { label: "Investigate his background", nextScene: "case5_investigate_arthur_background" }
    ]
};

scenes["case5_investigate_arthur_background"] = {
    background: "bg-police-station",
    speaker: "Officer Miller",
    text: "Arthur's background check: Retired naval engineer, specializing in hydraulic systems and deep-sea winches. His son recently lost his life savings due to Alistair's predatory business practices.",
    choices: [
        { label: "Strong, hidden motive!", nextScene: "case5_search_arthur_cabin" }
    ]
};

// --- The Critical Clue (Breaks the "Strength" Assumption) ---
scenes["case5_search_arthur_cabin"] = {
    background: "bg-arthur-cabin",
    speaker: "Detective",
    text: "Arthur's cabin is spotless. Inside, is pristine, nothing out of place and nothing out of the ordinary. On the balcony is a typical safety device.",
    choices: [
        { label: "Look into the Safety Device", nextScene: "case5_winch_analysis" }
    ]
};

scenes["case5_winch_analysis"] = {
    background: "bg-arthur-cabin",
    speaker: "Detective",
    text: "This life preserver is hiding a winch, a tool designed to lift hundreds of pounds with minimal effort. It is meant to save, but it could easily be temporarily mounted to aother railing, making it possible for anyone, regardless of age, to dispose of the body.",
    choices: [
        { label: "The strength requirement was a decoy", nextScene: "case5_confront_arthur" }
    ]
};

// --- Final Confrontation ---
scenes["case5_confront_arthur"] = {
    background: "bg-cruise-observation-deck",
    speaker: "Arthur",
    text: "So you found my out? It was never about strength, Detective. It was about mechanics and leverage. Alistair ruined my boy. I used a small crank and the winch to lift his body and drop it into the sea, right where Bridget saw me fumbling. I made it look like a strong man's work, knowing everyone would overlook the frail old man.",
    choices: [
        { label: "Prepare the warrant for Arthur", nextScene: "case5_accusation" }
    ]
};
scenes["case5_accusation"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Detective, it's time to formalize the accusation. Based on the evidence, who is the killer, and what was the method that overcame the 'strength' problem?",
    choices: [
        {Â 
            label: "Arthur: He used his naval engineering background and a concealed winch to dispose of the body.",Â 
            nextScene: "case5_ending_true" 
        },
        {Â 
            label: "Samantha: She possessed the physical strength and motive, using brute force.",Â 
            nextScene: "case5_ending_false_samantha"Â 
        },
        {Â 
            label: "Edgar and Oscar: Acted as an intoxicated team to overcome the victim and dispose of the body.",Â 
            nextScene: "case5_ending_false_edgar"Â 
        },
        {
            label: "Bridget: She found the earring and is hiding the true weapon, suggesting crew involvement.",
            nextScene: "case5_ending_false_bridget" 
        },
        {Â 
            label: "I only suspect Arthur, but I don't have definitive evidence on the body disposal.",Â 
            nextScene: "case5_ending_unsolved"Â 
        }
    ]
};

scenes["case5_ending_true"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "The warrant was successful. Arthur confessed to using the winch system. The mechanic's solution to a strength problem to easily dispose of the body, fooling us into looking for a younger killer. His revenge for his son's financial ruin led to a cold, calculated murder. Case closed.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ],
    sfx: "crowd"
};

scenes["case5_ending_false_samantha"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "The warrant for Samantha was denied. Her alibi held up, despite her strength and clear motive. The true killer, who did not rely on muscle, remains free, and the case is compromised.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};

scenes["case5_ending_false_edgar"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Edgar and Oscar were too drunk and lacked the precision required to pull off such a careful disposal. We missed the true mechanism of the murder.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};

scenes["case5_ending_false_bridget"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Bridget was questioned about the earring, but she had no motive and was verified cleaning on a lower deck. Pinning the murder on a junior staff member without proof was a mistake.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};

scenes["case5_ending_unsolved"] = {
    background: "bg-captain-office",
    speaker: "Captain",
    text: "Without definitive proof of *how* the body was disposed of, we cannot secure an arrest. The killer walks free, and the case goes cold.",
    choices: [
        { label: "Return to main menu", nextScene: "main_menu" }
    ]
};
        // Game Functions
        function showScene(sceneId) {
            const scene = scenes[sceneId];
            if (!scene) {
                console.error("Scene not found:", sceneId);
                return;
            }

            // Update background
            document.getElementById("background").className = scene.background;
            
            // Update speaker and text
            document.getElementById("speaker-name").textContent = scene.speaker;
            document.getElementById("dialogue-text").textContent = scene.text;
            
            // Clear previous choices
            const choicesContainer = document.getElementById("choices-container");
            choicesContainer.innerHTML = "";
            
            // Add new choices
            scene.choices.forEach(choice => {
                const button = document.createElement("button");
                button.className = "choice-btn";
                button.textContent = choice.label;
                
                button.addEventListener("click", () => {
                    // Play click sound
                    sounds.click.play().catch(e => console.log("Audio play failed:", e));
                    
                    // Apply any effect
                    if (choice.effect) {
                        choice.effect();
                    }
                    
                    // Determine next scene
                    let nextSceneId;
                    if (typeof choice.nextScene === "function") {
                        nextSceneId = choice.nextScene();
                    } else {
                        nextSceneId = choice.nextScene;
                    }
                    
                    // Handle special scenes
                    if (nextSceneId === "main_menu") {
                        showMainMenu();
                    } else {
                        showScene(nextSceneId);
                    }
                });
                
                choicesContainer.appendChild(button);
            });
            
            // Play sound effect if specified
            if (scene.sfx && sounds[scene.sfx]) {
                sounds[scene.sfx].play().catch(e => console.log("Audio play failed:", e));
            }
        }

        function showMainMenu() {
            document.getElementById("main-menu").style.display = "flex";
            document.getElementById("game-screen").style.display = "none";
            document.getElementById("ending-screen").style.display = "none";
            
            // Reset game state
            gameState.currentCase = null;
            gameState.clues = {};
            gameState.suspectTrust = {
                mara: 0,
                alex: 0,
                victor: 0,
                elena: 0,
                benjamin: 0,
                isabella: 0,
                jack: 0,
                olivia: 0,
                marco: 0,
                victoria: 0,
                arthur: 0
            };
            gameState.flags = {};
        }

        function startCase(caseNumber) {
            gameState.currentCase = caseNumber;
            document.getElementById("main-menu").style.display = "none";
            document.getElementById("game-screen").style.display = "flex";
            document.getElementById("ending-screen").style.display = "none";
            
            // Start the appropriate case
            showScene(`case${caseNumber}_intro`);
        }

        // Utility functions for game logic
        function addClue(clueId) {
            gameState.clues[clueId] = true;
            console.log("Clue added:", clueId);
        }

        function modifyTrust(suspect, amount) {
            gameState.suspectTrust[suspect] += amount;
            console.log(`Trust modified: ${suspect} now at ${gameState.suspectTrust[suspect]}`);
        }

        // Notepad functionality
        function toggleNotepad() {
            const notepadContainer = document.getElementById("notepad-container");
            if (notepadContainer.style.display === "none") {
                notepadContainer.style.display = "flex";
                document.getElementById("notepad").value = gameState.notes;
            } else {
                notepadContainer.style.display = "none";
                // Save notes to game state
                gameState.notes = document.getElementById("notepad").value;
            }
        }

        function saveNotes() {
            gameState.notes = document.getElementById("notepad").value;
        }

        // Event Listeners
        document.addEventListener("DOMContentLoaded", () => {
            // Case selection buttons
            document.querySelectorAll(".case-btn").forEach(button => {
                button.addEventListener("click", (e) => {
                    const caseNumber = e.target.getAttribute("data-case");
                    startCase(caseNumber);
                });
            });
            
            // Game control buttons
            document.getElementById("toggle-notepad").addEventListener("click", toggleNotepad);
            document.getElementById("restart-case-btn").addEventListener("click", () => {
                if (gameState.currentCase) {
                    startCase(gameState.currentCase);
                }
            });
            document.getElementById("main-menu-btn").addEventListener("click", showMainMenu);
            
            // Notepad auto-save
            document.getElementById("notepad").addEventListener("input", saveNotes);
            
            // Ending screen buttons
            document.getElementById("restart-case").addEventListener("click", () => {
                if (gameState.currentCase) {
                    startCase(gameState.currentCase);
                }
            });
            
            document.getElementById("return-menu").addEventListener("click", showMainMenu);
            
            // Initialize with main menu
            showMainMenu();
        });
    </script>
</body>
</html>
